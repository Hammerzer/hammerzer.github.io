<!DOCTYPE html><html lang="zh-CN"><head><script src="https://lib.sinaapp.com/js/jquery/1.7.2/jquery.min.js"></script><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/images/180-180.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/32-32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/16-16.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css"><script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"hammerzer.github.io",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"flat"},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:"valine",storage:!0,lazyload:!1,nav:null,activeClass:"valine"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="CONTENT OUTLINEC++ 基础  初识 数据类型 运算符 程序流程结构 数组 函数 指针 结构体 案例"><meta property="og:type" content="article"><meta property="og:title" content="CPP-BASE-1"><meta property="og:url" content="https://hammerzer.github.io/2024/03/11/cpp-base-1/index.html"><meta property="og:site_name" content="Moustache&#39;s Blog"><meta property="og:description" content="CONTENT OUTLINEC++ 基础  初识 数据类型 运算符 程序流程结构 数组 函数 指针 结构体 案例"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://hammerzer.github.io/2024/03/11/cpp-base-1/cpp1-8.png"><meta property="og:image" content="https://hammerzer.github.io/2024/03/11/cpp-base-1/cpp1-9.png"><meta property="og:image" content="https://hammerzer.github.io/2024/03/11/cpp-base-1/cpp1-10.png"><meta property="og:image" content="https://hammerzer.github.io/2024/03/11/cpp-base-1/cpp7-1.PNG"><meta property="og:image" content="https://hammerzer.github.io/2024/03/11/cpp-base-1/cpp7-2.PNG"><meta property="og:image" content="https://hammerzer.github.io/2024/03/11/cpp-base-1/cpp7-3.PNG"><meta property="og:image" content="https://hammerzer.github.io/2024/03/11/cpp-base-1/cpp7-4.PNG"><meta property="og:image" content="https://hammerzer.github.io/2024/03/11/cpp-base-1/cpp1-1.png"><meta property="article:published_time" content="2024-03-11T08:51:50.000Z"><meta property="article:modified_time" content="2025-01-19T03:19:15.126Z"><meta property="article:author" content="Moustache"><meta property="article:tag" content="CPP基础"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://hammerzer.github.io/2024/03/11/cpp-base-1/cpp1-8.png"><link rel="canonical" href="https://hammerzer.github.io/2024/03/11/cpp-base-1/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>CPP-BASE-1 | Moustache's Blog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="Moustache's Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Moustache's Blog</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">小胡子的私人空间</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">36</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">9</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">79</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://hammerzer.github.io/2024/03/11/cpp-base-1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/180-180.png"><meta itemprop="name" content="Moustache"><meta itemprop="description" content="我是小胡子"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Moustache's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">CPP-BASE-1</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2024-03-11 16:51:50" itemprop="dateCreated datePublished" datetime="2024-03-11T16:51:50+08:00">2024-03-11</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-01-19 11:19:15" itemprop="dateModified" datetime="2025-01-19T11:19:15+08:00">2025-01-19</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CPP/" itemprop="url" rel="index"><span itemprop="name">CPP</span></a> </span></span><span id="/2024/03/11/cpp-base-1/" class="post-meta-item leancloud_visitors" data-flag-title="CPP-BASE-1" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="leancloud-visitors-count"></span> <span>℃</span> </span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valine：</span> <a title="valine" href="/2024/03/11/cpp-base-1/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2024/03/11/cpp-base-1/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>71k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1:04</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="CONTENT-OUTLINE"><a href="#CONTENT-OUTLINE" class="headerlink" title="CONTENT OUTLINE"></a>CONTENT OUTLINE</h2><p><code>C++</code> 基础<span style="background:#ff0"></span></p><ol><li>初识</li><li>数据类型</li><li>运算符</li><li>程序流程结构</li><li>数组</li><li>函数</li><li>指针</li><li>结构体</li><li>案例</li></ol><span id="more"></span><h2 id="一、C-基础"><a href="#一、C-基础" class="headerlink" title="一、C++ 基础"></a>一、<code>C++</code> 基础</h2><h3 id="1、C-初识"><a href="#1、C-初识" class="headerlink" title="1、C++初识"></a>1、C++初识</h3><h4 id="1-1-C-环境配置"><a href="#1-1-C-环境配置" class="headerlink" title="1.1 C++ 环境配置"></a>1.1 C++ 环境配置</h4><blockquote><p>这里使用 <code>VScode</code> 进行代码编写，配置过程参考 <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/87864677/">这里</a></p><p><code>MinGW</code> 的安装配置参考 <a target="_blank" rel="noopener" href="http://c.biancheng.net/view/8077.html">这里</a></p><p>C++工作区配置参考 <a target="_blank" rel="noopener" href="https://blog.csdn.net/Zhangguohao666/article/details/104963520">这里</a></p><p>Visual Studio 快捷键参考 <a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/visualstudio/ide/default-keyboard-shortcuts-in-visual-studio?view=vs-2022&utm_source=vshelp">这里</a></p></blockquote><table><thead><tr><th>命令</th><th>快捷键</th></tr></thead><tbody><tr><td>生成解决方案，给出目前编译错误</td><td><strong>Ctrl+Shift+B</strong></td></tr><tr><td>完成单词【联想】</td><td><strong>Alt+向右键</strong> [文本编辑器、工作流设计器]</td></tr><tr><td>完成单词【补充】</td><td><strong>Ctrl+空格键</strong> | <strong>Ctrl+K</strong>、<strong>W</strong></td></tr><tr><td>选择当前字词</td><td><strong>Ctrl+W</strong></td></tr><tr><td>断行</td><td><strong>Enter</strong> 或 <strong>Shift+Enter</strong></td></tr><tr><td>设置文档格式</td><td><strong>Ctrl+K、Ctrl+D</strong></td></tr><tr><td>设置选定内容的格式，整理缩进格式</td><td><strong>Ctrl+K、Ctrl+F</strong></td></tr><tr><td>块注释</td><td><strong>Ctrl+K</strong>、<strong>Ctrl+C</strong> [文本编辑器]</td></tr><tr><td>快速行注释</td><td><strong>Ctrl+Shift+/</strong></td></tr><tr><td>取消注释选定内容</td><td><strong>Ctrl+K、Ctrl+U</strong></td></tr><tr><td>快速调试</td><td><strong>F5</strong></td></tr><tr><td>删除行</td><td><strong>Ctrl+L</strong> 或 Shift+Del</td></tr><tr><td>匹配替换</td><td><strong>Ctrl+H</strong></td></tr><tr><td>查找</td><td><strong>Ctrl+I</strong></td></tr><tr><td>智能提示</td><td><strong>Ctrl+J</strong></td></tr><tr><td>补全变量的头文件</td><td>Alt + Enter</td></tr><tr><td>方法参数提示</td><td><strong>Ctrl + Shift +空格</strong></td></tr><tr><td>智能标记（如：提示using、实现接口、抽象类等）</td><td><strong>Ctrl+.</strong></td></tr><tr><td>跳转父类或相关实现</td><td><code>F12</code> 或 <code>Ctrl+左键</code></td></tr><tr><td>返回跳转前的类</td><td><code>Ctrl + -</code> 或 <code>Ctrl + Shift + *</code></td></tr></tbody></table><blockquote><p><strong>问题</strong>：<code>VScode</code> 运行<code>C++</code>中文终端乱码问题</p><p><strong>原因</strong>：<code>VScode</code> 编辑器的编码和终端的编码不一致。<code>VScode</code> 为<code>utf-8</code>，而<code>cmd</code>的默认编码方式为<code>gbk</code>。</p><p><strong>解决办法一</strong>：修改<code>VScode</code> 文件编码为<code>GBK</code>。</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一个程序</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Hello world&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// pause 是cmd命令，可在cmd直接用</span></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>常见的系统命令：</strong></p><ul><li><code>cls</code>、<code>pause</code></li><li><code>shutdown /s【一分钟后关机】</code>、<code>shutdown /a【取消关机】</code>、【help：<code>shutdown /?</code>】</li><li><code>字符串路径</code>：也可用路径打开文件</li><li><code>color 12</code>：改变控制台背景颜色【<code>0~9</code>依次是：黑、蓝、绿、湖蓝、红、紫、黄、白、灰、淡蓝；<code>A~F</code>依次是：淡绿、淡浅绿、淡红、淡紫、淡黄、亮白】</li><li><code>mode con cols=80 lines=40</code>：改变控制台背景颜色 【<code>mode con /?</code>】</li></ul></blockquote><blockquote><p><strong>额外补充：</strong></p><ul><li>C++ 中的数字输出，可用上引号分隔便于阅读，如 <code>10&#39;67</code>：十进制67，<code>234‘243</code>：234243，<code>OB11</code>：二进制11，<code>011</code>：八进制，<code>0x10</code>：十六进制</li><li>整型字面量后可以加后缀。L/l：long型，LL/ll：long long型，U/u：无符号型，ULL/ull：无符号long long型</li></ul></blockquote><br><h4 id="1-2-变量"><a href="#1-2-变量" class="headerlink" title="1.2 变量"></a>1.2 变量</h4><p><strong>作用</strong>：给一段指定的内存空间起名，方便操作这段内存</p><p><strong>语法</strong>：</p><ul><li><code>数据类型 变量名 = 初始值;</code></li><li><code>数据类型 变量名 &#123;初始值&#125;;</code> 【新|更严格】</li></ul><blockquote><p>注意：C++在创建变量时，必须给变量一个初始值，否则会报错【应该是在使用前必须初始化】</p><p><strong>初始化方式如下：</strong></p><ul><li><code>age = 18; // 只有一个问题，编译不严格，如int age = 7.5</code></li><li><code>age&#123;18&#125;;</code></li><li><code>age&#123;&#125;;//默认0</code></li><li><code>age(18);// c++11的写法，基本被淘汰</code></li><li><code>age();//错</code></li></ul></blockquote><h5 id="1-2-1-自定义变量名称"><a href="#1-2-1-自定义变量名称" class="headerlink" title="1.2.1 自定义变量名称"></a>1.2.1 自定义变量名称</h5><ul><li><code>#define A TypeName</code>：可以用A来替换TypeName，如<code>#define 整数 int</code></li><li><code>typedef TypeName A</code> ：可以用A来替换TypeName，如<code>typedef int eInt;</code></li><li><code>using A = TypeName</code> ：可以用A来替换TypeName，如<code>using eInt32 = int;</code></li></ul><br><h4 id="1-3-常量"><a href="#1-3-常量" class="headerlink" title="1.3  常量"></a>1.3 常量</h4><p><strong>作用</strong>：用于记录程序中不可更改的数据</p><p><strong>C++定义常量两种方式</strong></p><ol><li><strong>#define</strong> 宏常量： <code>#define 常量名 常量值</code>【无分号结尾】<ul><li><span style="background:#ff0">通常在文件上方定义</span>，表示一个常量</li></ul></li></ol><ol start="2"><li><strong>const</strong>修饰的变量 <code>const 数据类型 常量名 = 常量值</code>【同变量定义，可能有新写法】<ul><li><span style="background:#ff0">通常在变量定义前加关键字const</span>，修饰该变量为常量，不可修改</li></ul></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、宏常量</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> day 7</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;一周里总共有 &quot;</span> &lt;&lt; day &lt;&lt; <span class="string">&quot; 天&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//day = 8;  //报错，宏常量不可以修改</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、const修饰变量</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> month = <span class="number">12</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;一年里总共有 &quot;</span> &lt;&lt; month &lt;&lt; <span class="string">&quot; 个月份&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//month = 24; //报错，常量是不可以修改的</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="1-4-关键字"><a href="#1-4-关键字" class="headerlink" title="1.4 关键字"></a>1.4 关键字</h4><p><strong>作用：</strong>关键字是C++中预先保留的单词（标识符）</p><ul><li><strong>在定义变量或者常量时候，不要用关键字</strong></li></ul><p>C++关键字如下：</p><table><thead><tr><th>asm</th><th>do</th><th>if</th><th>return</th><th>typedef</th></tr></thead><tbody><tr><td>auto</td><td>double</td><td>inline</td><td>short</td><td>typeid</td></tr><tr><td>bool</td><td>dynamic_cast</td><td>int</td><td>signed</td><td>typename</td></tr><tr><td>break</td><td>else</td><td>long</td><td>sizeof</td><td>union</td></tr><tr><td>case</td><td>enum</td><td>mutable</td><td>static</td><td>unsigned</td></tr><tr><td>catch</td><td>explicit</td><td>namespace</td><td>static_cast</td><td>using</td></tr><tr><td>char</td><td>export</td><td>new</td><td>struct</td><td>virtual</td></tr><tr><td>class</td><td>extern</td><td>operator</td><td>switch</td><td>void</td></tr><tr><td>const</td><td>false</td><td>private</td><td>template</td><td>volatile</td></tr><tr><td>const_cast</td><td>float</td><td>protected</td><td>this</td><td>wchar_t</td></tr><tr><td>continue</td><td>for</td><td>public</td><td>throw</td><td>while</td></tr><tr><td>default</td><td>friend</td><td>register</td><td>true</td><td></td></tr><tr><td>delete</td><td>goto</td><td>reinterpret_cast</td><td>try</td><td></td></tr></tbody></table><p><code>提示：在给变量或者常量起名称时候，不要用C++得关键字，否则会产生歧义。</code></p><br><h4 id="1-5-标识符命名规则"><a href="#1-5-标识符命名规则" class="headerlink" title="1.5 标识符命名规则"></a>1.5 标识符命名规则</h4><p><strong>作用</strong>：C++规定给标识符（变量、常量）命名时，有一套自己的规则</p><ul><li>标识符不能是关键字</li><li>标识符只能由字母、数字、下划线组成</li><li><span style="background:#ff0">第一个字符必须为字母或下划线</span></li><li>标识符中字母区分大小写</li></ul><blockquote><p>建议：给标识符命名时，争取做到见名知意的效果，方便自己和他人的阅读</p></blockquote><br><h3 id="2、数据类型"><a href="#2、数据类型" class="headerlink" title="2、数据类型"></a>2、数据类型</h3><p>C++规定在创建一个变量或者常量时，必须要指定出相应的数据类型，否则无法给变量分配内存</p><p><img src="./cpp1-8.png"></p><p><img src="./cpp1-9.png"></p><h4 id="2-1-整型"><a href="#2-1-整型" class="headerlink" title="2.1 整型"></a>2.1 整型</h4><p><strong>作用</strong>：整型变量表示的是<span style="background:#ff0">整数类型</span>的数据</p><p>C++中能够表示整型的类型有以下几种方式，<strong>区别在于所占内存空间不同</strong>：</p><table><thead><tr><th><strong>数据类型</strong></th><th><strong>占用空间</strong></th><th>取值范围</th></tr></thead><tbody><tr><td>short(短整型)</td><td>2字节</td><td>(-2^15 ~ 2^15-1)</td></tr><tr><td>int(整型)</td><td>4字节</td><td>(-2^31 ~ 2^31-1)</td></tr><tr><td>long(长整形)</td><td>Windows为4字节，Linux为4字节(32位)，8字节(64位)</td><td>(-2^31 ~ 2^31-1)</td></tr><tr><td>long long(长长整形)</td><td>8字节</td><td>(-2^63 ~ 2^63-1)</td></tr></tbody></table><br><h4 id="2-2-sizeof关键字"><a href="#2-2-sizeof关键字" class="headerlink" title="2.2 sizeof关键字"></a>2.2 sizeof关键字</h4><p><strong>作用：</strong>利用sizeof关键字可以<span style="background:#ff0">统计数据类型所占内存大小</span></p><p><strong>语法：</strong> <code>sizeof( 数据类型 / 变量)</code></p><p><strong>示例：</strong><code>sizeof(int)</code></p><blockquote><p><strong>整型结论</strong>：<span style="background:#ff0">short &lt; int &lt;= long &lt;= long long</span></p></blockquote><p><strong>注意：</strong>sizeof 汇编代码中，没有计算大小的过程。因此，sizeof大小的计算在<strong>编译过程</strong>中完成。</p><br><h4 id="2-3-实型（浮点型）"><a href="#2-3-实型（浮点型）" class="headerlink" title="2.3 实型（浮点型）"></a>2.3 实型（浮点型）</h4><p><strong>作用</strong>：用于<span style="background:#ff0">表示小数</span></p><p>浮点型变量分为两种：</p><ul><li>单精度float 【后缀 <code>F/f</code>，不带后缀的浮点数视为double，如后缀】</li><li>双精度double</li></ul><p>两者的<strong>区别</strong>在于表示的有效数字范围不同。</p><table><thead><tr><th><strong>数据类型</strong></th><th><strong>占用空间</strong></th><th><strong>有效数字范围</strong></th></tr></thead><tbody><tr><td>float</td><td>4字节</td><td>7位有效数字</td></tr><tr><td>double</td><td>8字节</td><td>15～16位有效数字</td></tr><tr><td>long double</td><td>8字节</td><td>15～16位有效数字</td></tr></tbody></table><blockquote><p>浮点数也可以表达整数：<code>2E2 = 200.0</code></p></blockquote><br><h4 id="2-4-字符型"><a href="#2-4-字符型" class="headerlink" title="2.4 字符型"></a>2.4 字符型</h4><h5 id="2-4-1-字符型变量"><a href="#2-4-1-字符型变量" class="headerlink" title="2.4.1 字符型变量"></a>2.4.1 字符型变量</h5><p><strong>作用：</strong>字符型变量用于显示单个字符</p><p><strong>语法：</strong><code>char ch = &#39;a&#39;;</code></p><blockquote><p>注意1：在显示字符型变量时，用单引号将字符括起来，<strong>不要用双引号</strong></p><p>注意2：单引号内只能有一个字符，不可以是字符串</p></blockquote><ul><li>C和C++中字符型变量只占用<span style="background:#ff0">1个字节</span>。</li><li>字符型变量并不是把字符本身放到内存中存储，而是将对应的ASCII编码放入到存储单元</li></ul><blockquote><p>ASCII 码大致由以下<strong>两部分组</strong>成：</p><ul><li>ASCII 非打印控制字符： ASCII 表上的数字 <strong>0-31</strong> 分配给了控制字符，用于控制像打印机等一些外围设备。</li><li>ASCII 打印字符：数字 <strong>32-126</strong> 分配给了能在键盘上找到的字符，当查看或打印文档时就会出现。</li></ul></blockquote><p><strong>扩展：</strong>字符数据类型</p><table><thead><tr><th align="center">类型</th><th>占用内存</th><th>说明</th></tr></thead><tbody><tr><td align="center">char</td><td>1</td><td>ASCⅡ</td></tr><tr><td align="center">wchar_t</td><td>2</td><td>宽字节字符</td></tr><tr><td align="center">char16_t</td><td>2</td><td>UTF-16字符</td></tr><tr><td align="center">char32_t</td><td>4</td><td>UTF-32字符</td></tr></tbody></table><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">setlocale</span>(LC_ALL, <span class="string">&quot;chs&quot;</span>);</span><br><span class="line">    <span class="type">char</span> charA&#123; <span class="string">&#x27;A&#x27;</span> &#125;;</span><br><span class="line">    <span class="type">char</span> charB&#123; <span class="number">65</span> &#125;;</span><br><span class="line">    <span class="type">wchar_t</span> wchar1&#123; <span class="string">L&#x27;A&#x27;</span> &#125;;</span><br><span class="line">    <span class="type">wchar_t</span> wchar2&#123; <span class="string">L&#x27;我&#x27;</span> &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="type">char16_t</span> wchar1&#123; <span class="string">u&#x27;A&#x27;</span> &#125;;</span><br><span class="line">    <span class="type">char32_t</span> wchar1&#123; <span class="string">U&#x27;A&#x27;</span> &#125;;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; charA &lt;&lt; <span class="string">&#x27;,&#x27;</span> &lt;&lt; charB &lt;&lt; <span class="string">&#x27;,&#x27;</span>;</span><br><span class="line">    std::wcout &lt;&lt; wchar1 &lt;&lt; <span class="string">&#x27;,&#x27;</span> &lt;&lt; wchar2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>其他字符集：gbk / GB2312 / GB18030 / UNICODE规范【实现：utf-16 | utf-8 | utf-32】</p></blockquote><h5 id="2-4-2-字符处理"><a href="#2-4-2-字符处理" class="headerlink" title="2.4.2 字符处理"></a>2.4.2 字符处理</h5><blockquote><p>字符处理函数头文件【cctype头文件】</p></blockquote><table><thead><tr><th align="center">函数</th><th>说明</th></tr></thead><tbody><tr><td align="center">int isupper(char)</td><td>判断字符是否为大写字母</td></tr><tr><td align="center">int islower(char)</td><td>判断字符是否为小写字母</td></tr><tr><td align="center">int isalpha(char)</td><td>判断字符是否为字母</td></tr><tr><td align="center">int isdigit(char)</td><td>判断字符是否为数字</td></tr><tr><td align="center">int isalnum(char)</td><td>判断字符是否为字母或数字</td></tr><tr><td align="center">int isspace(char)</td><td>判断字符是否为空格</td></tr><tr><td align="center">int isblank(char)</td><td>判断字符是否为空白</td></tr><tr><td align="center">int ispunct(char)</td><td>判断字符是否为标点符号</td></tr><tr><td align="center">int isprint(char)</td><td>判断字符是否可打印</td></tr><tr><td align="center">int iscntrl(char)</td><td>判断字符是否为控制字符</td></tr><tr><td align="center">int isgraph(char)</td><td>判断字符是否为图形字符</td></tr><tr><td align="center">int tolower(char)</td><td>转换字符为小写</td></tr><tr><td align="center">int toupper(char)</td><td>转换字符为大写</td></tr></tbody></table><br><h4 id="2-5-转义字符"><a href="#2-5-转义字符" class="headerlink" title="2.5 转义字符"></a>2.5 转义字符</h4><p><strong>作用：</strong>用于表示一些<span style="background:#ff0">不能显示出来的ASCII字符</span></p><p>现阶段我们常用的转义字符有：<code>\n \\ \t</code></p><table><thead><tr><th><strong>转义字符</strong></th><th><strong>含义</strong></th><th><strong>ASCII</strong>码值（十进制）</th></tr></thead><tbody><tr><td>\a</td><td>警报</td><td>007</td></tr><tr><td>\b</td><td>退格(BS) ，将当前位置移到前一列</td><td>008</td></tr><tr><td>\f</td><td>换页(FF)，将当前位置移到下页开头</td><td>012</td></tr><tr><td><strong>\n</strong></td><td><strong>换行(LF) ，将当前位置移到下一行开头</strong></td><td><strong>010</strong></td></tr><tr><td>\r</td><td>回车(CR) ，将当前位置移到本行开头</td><td>013</td></tr><tr><td><strong>\t</strong></td><td><strong>水平制表(HT) （跳到下一个TAB位置）</strong></td><td><strong>009</strong></td></tr><tr><td>\v</td><td>垂直制表(VT)</td><td>011</td></tr><tr><td><strong>\\</strong></td><td><strong>代表一个反斜线字符”&quot;</strong></td><td><strong>092</strong></td></tr><tr><td>&#39;</td><td>代表一个单引号（撇号）字符</td><td>039</td></tr><tr><td>&quot;</td><td>代表一个双引号字符</td><td>034</td></tr><tr><td>?</td><td>代表一个问号</td><td>063</td></tr><tr><td>\0</td><td>数字0</td><td>000</td></tr><tr><td>\ddd</td><td>8进制转义字符，d范围<code>0~7</code></td><td>3位8进制</td></tr><tr><td>\xhh</td><td>16进制转义字符，h范围<code>0~9</code>，<code>a~f</code>，<code>A~F</code></td><td>3位16进制</td></tr></tbody></table><br><h4 id="2-6-字符串型"><a href="#2-6-字符串型" class="headerlink" title="2.6 字符串型"></a>2.6 字符串型</h4><h5 id="2-6-1-字符串型变量"><a href="#2-6-1-字符串型变量" class="headerlink" title="2.6.1 字符串型变量"></a>2.6.1 字符串型变量</h5><p><strong>作用</strong>：用于表示一串字符</p><p><strong>两种风格</strong></p><ul><li><p><strong>C风格字符串</strong>： <code>char 变量名[] = &quot;字符串值&quot;</code></p><p><strong>示例</strong>：<code>char str1[] = &quot;hello world&quot;;</code></p></li></ul><blockquote><p>注意：C风格的字符串要用双引号括起来</p></blockquote><ul><li><strong>C++风格字符串</strong>： <code>string 变量名 = &quot;字符串值&quot;</code></li></ul><p><strong>示例</strong>：<code>string str = &quot;hello world&quot;;</code></p><blockquote><p>注意：C++风格字符串，需要加入头文件<span style="background:#ff0">#include&lt;string&gt;</span></p><p>注意：<code>\0 = 数字0</code>【C语言中的字符串以0结尾】</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;locale&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 两种字符串数组风格</span></span><br><span class="line">    <span class="type">char</span> str1[<span class="number">0xff</span>]&#123; <span class="string">&#x27;H&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>&#125;;</span><br><span class="line">    <span class="type">char</span> str2[<span class="number">0xff</span>]&#123; <span class="string">&quot;Hello&quot;</span> &#125;;</span><br><span class="line">    <span class="comment">// 两种指针字符串风格</span></span><br><span class="line">    <span class="type">char</span>* str3 = (<span class="type">char</span>*)<span class="string">&quot;Hello&quot;</span>;<span class="comment">// 默认为const char[]类型，需要强转为char[]</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* str4 = <span class="string">&quot;Hello&quot;</span>; <span class="comment">// 同str3</span></span><br><span class="line">    <span class="type">char</span>* str5 = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">0xff</span>] &#123;<span class="string">&quot;Hello张三&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; str1 &lt;&lt; <span class="string">&quot; &quot;</span>&lt;&lt; str2&lt;&lt; <span class="string">&quot; &quot;</span>&lt;&lt; str3&lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; str4 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; str5 &lt;&lt; <span class="string">&quot; &quot;</span>  &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 宽字节字符串【假设编译器采用UTF16实现unicode标准】</span></span><br><span class="line">    <span class="type">wchar_t</span> wstr[<span class="number">0xff</span>]&#123; <span class="string">L&quot;Hello!张三&quot;</span> &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; wstr[i]; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; hex &lt;&lt; (<span class="type">short</span>)wstr[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//wcout &lt;&lt; wstr &lt;&lt;&#x27;1&#x27; &lt;&lt; endl;</span></span><br><span class="line">    <span class="comment">// 不能显示中文：需要设置头文件的编码</span></span><br><span class="line">    <span class="built_in">setlocale</span>(LC_ALL, <span class="string">&quot;chs&quot;</span>);</span><br><span class="line">    wcout &lt;&lt; wstr &lt;&lt;<span class="string">&#x27;2&#x27;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-6-2-字符串处理"><a href="#2-6-2-字符串处理" class="headerlink" title="2.6.2 字符串处理"></a>2.6.2 字符串处理</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS <span class="comment">// 须在第一行</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;locale&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// C语言风格【char[] | wchar_t[]】</span></span><br><span class="line">    <span class="comment">// 如果输入超过定义在栈区的内存大小，就会引发异常！</span></span><br><span class="line">    <span class="type">char</span> name[<span class="number">0x10</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, name);<span class="comment">// 注意：此处name是数组名，本身就是指针</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt;<span class="string">&quot;名字：&quot;</span> &lt;&lt; name  &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;名字是：%s\n&quot;</span>, name);</span><br><span class="line"></span><br><span class="line">    <span class="type">wchar_t</span> wstr[<span class="number">0x5</span>];</span><br><span class="line">    <span class="comment">// 或动态申请内存【堆区的安全同理，依然会有越界问题】</span></span><br><span class="line">    <span class="comment">//wchar_t* wstr = new wchar_t[0x5];// 英文字母占一个字节，中文汉字2字节</span></span><br><span class="line">    <span class="built_in">wscanf</span>(<span class="string">L&quot;%s&quot;</span>, wstr);</span><br><span class="line">    <span class="built_in">setlocale</span>(LC_ALL, <span class="string">&quot;chs&quot;</span>);</span><br><span class="line">    <span class="built_in">wprintf</span>(<span class="string">L&quot;名字是%s&quot;</span>, wstr);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>上述的越界问题，可使用 <code>scanf_s / wscanf_s</code> 解决</p><p><code>scanf_s(&quot;%s&quot;, str, maxNum)；</code></p><p><code>wscanf_s(L&quot;%s&quot;, str, maxNum)；</code></p><p>此时不需要：<code>#define _CRT_SECURE_NO_WARNINGS</code></p></blockquote><p>C++风格：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;locale&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// C++风格</span></span><br><span class="line">    <span class="type">int</span> x[<span class="number">0x10</span>];</span><br><span class="line">    cout &lt;&lt; x &lt;&lt; endl;<span class="comment">//输出地址</span></span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> name[<span class="number">0x10</span>];</span><br><span class="line">    cout &lt;&lt; name &lt;&lt; endl;<span class="comment">// cout对char[]会优先当作字符串来处理</span></span><br><span class="line">    cin &gt;&gt; name;</span><br><span class="line">    cout &lt;&lt; name &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="type">wchar_t</span> wstr[<span class="number">0x5</span>];</span><br><span class="line">    <span class="built_in">setlocale</span>(LC_ALL, <span class="string">&quot;chs&quot;</span>);<span class="comment">// 不设置默认为cmd窗口的字符集</span></span><br><span class="line">    wcin &gt;&gt; wstr;</span><br><span class="line">    wcout &lt;&lt; wstr &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符串长度:char[]</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;字符串长度：&quot;</span> &lt;&lt; <span class="built_in">strlen</span>(name) &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// 字符串长度:wchar_t[] 【一个中文算两个字节】</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;wchar_t字符串长度：&quot;</span> &lt;&lt; <span class="built_in">wcslen</span>(wstr) &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>c语言中，关于字符串的复制，提供了strcpy、strncpy、strlcpy，c++中提供了更为安全的strcpy_s等，需要随后补充。</p><h5 id="2-6-3-C-字符串"><a href="#2-6-3-C-字符串" class="headerlink" title="2.6.3 C++字符串"></a>2.6.3 C++字符串</h5><blockquote><p><code>std::string</code></p><p>原生的C风格字符串，存在一系列问题，比如字符串连接等</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> std::string;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">string <span class="title">str</span><span class="params">(<span class="string">&quot;葡萄皮！&quot;</span>)</span></span>;</span><br><span class="line">    std::cout &lt;&lt; str &lt;&lt; std::endl;</span><br><span class="line">    std::cin &gt;&gt; str;</span><br><span class="line">    std::cout &lt;&lt; str &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 其他的初始化方法：【中文支持不佳】</span></span><br><span class="line">    <span class="comment">// string str1&#123;&quot;12345678&quot;, 3&#125;;// 截取第二个参数长度的字符串</span></span><br><span class="line">    <span class="comment">// string str2&#123;&quot;12345678&quot;, int start, int length&#125;;// 截取起始的特定长度的字符串</span></span><br><span class="line">    <span class="comment">// string str3(int total, &#x27;a&#x27;);// 初始化total个a【a可用65代替】</span></span><br><span class="line">    <span class="function">string <span class="title">str1</span><span class="params">(<span class="number">3</span>, <span class="string">&#x27;a&#x27;</span>)</span></span>;<span class="comment">//aaa</span></span><br><span class="line">    std::cout &lt;&lt; str + str1 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// string + int ：需要转string才能拼接</span></span><br><span class="line">    <span class="type">int</span> age&#123; <span class="number">10</span> &#125;;</span><br><span class="line">    str1 = str1 + std::<span class="built_in">to_string</span>(age);</span><br><span class="line">    std::cout &lt;&lt; str1 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>string进阶：</strong></p><ul><li>字符串相加</li><li>字符串连接：<code>.append()</code></li><li>字符串截取：<code>.substr()</code></li><li>字符串长度：<code>.length()</code></li><li>字符串比较：重载 <code>==</code>、<code>!=</code>、<code>&gt;</code>、<code>&lt;</code>、<code>&gt;=</code>、<code>&lt;=</code></li><li>字符串比较：<code>.compare()</code></li><li>字符串搜索：<code>.find()</code>、<code>.rfind()</code>【倒搜索】</li><li>字符串插入：<code>.insert()</code></li><li>字符串替换：<code>.replace()</code></li><li>字符串删除内存：<code>.erase()</code></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> name <span class="string">&quot;John&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> age <span class="string">&quot;18&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string str,strA;</span><br><span class="line">    <span class="comment">//str = &quot;123&quot; + &quot;456&quot;;   // 错误：两个常量不能直接操作</span></span><br><span class="line">    str = string&#123; <span class="string">&quot;123&quot;</span> &#125; + <span class="string">&quot;456&quot;</span>;</span><br><span class="line">    cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 常见错误：优先级：+ &gt; +=</span></span><br><span class="line">    <span class="comment">//str += &quot;a&quot; + &quot;b&quot;;</span></span><br><span class="line">    str += <span class="string">&quot;a&quot;</span> + string&#123; <span class="string">&quot;b&quot;</span> &#125;;</span><br><span class="line">    cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 另一种变通方法【作用不大：仅用于已经定义过的常量】</span></span><br><span class="line">    strA = <span class="string">&quot;123&quot;</span><span class="string">&quot;abc&quot;</span>;</span><br><span class="line">    cout &lt;&lt; strA &lt;&lt; endl;</span><br><span class="line">    strA = name age;</span><br><span class="line">    cout &lt;&lt; strA &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符串和字符可直接相加</span></span><br><span class="line">    <span class="type">char</span> ch = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    strA = strA + ch;</span><br><span class="line">    cout &lt;&lt; strA &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//strA += ch + &#x27;o&#x27;; // 错误：相当于ASCⅡ码直接相加；</span></span><br><span class="line">    <span class="comment">//等价于 strA += char(ch + &#x27;o&#x27;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符串拼接函数【直接操作原字符串】</span></span><br><span class="line">    strA.<span class="built_in">append</span>(<span class="string">&quot;456&quot;</span>).<span class="built_in">append</span>(<span class="string">&quot;789&quot;</span>);</span><br><span class="line">    cout &lt;&lt; strA &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// 切分后再拼接</span></span><br><span class="line">    strA.<span class="built_in">append</span>(<span class="string">&quot;abc&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    cout &lt;&lt; strA &lt;&lt; endl;</span><br><span class="line">    strA.<span class="built_in">append</span>(<span class="string">&quot;abcdef&quot;</span>, <span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line">    cout &lt;&lt; strA &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 截取字符串【substr函数返回新的字符串，不操作原字符串】</span></span><br><span class="line">    string sub1&#123; strA.<span class="built_in">substr</span>(<span class="number">1</span>) &#125;;<span class="comment">// 从第一位开始截取</span></span><br><span class="line">    string sub2&#123; strA.<span class="built_in">substr</span>(<span class="number">1</span>,<span class="number">3</span>) &#125;;<span class="comment">//从第一位开始，一直到第三位【闭区间】</span></span><br><span class="line">    cout &lt;&lt; sub1 &lt;&lt; endl; </span><br><span class="line">    cout &lt;&lt; sub2 &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 字符串长度【不包含结尾\0，且不支持中文，中文算两个】</span></span><br><span class="line">    cout &lt;&lt; strA.<span class="built_in">length</span>() &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//原生的指针和数组字符串，不易比较</span></span><br><span class="line">    <span class="type">char</span>* str1&#123; (<span class="type">char</span>*)<span class="string">&quot;123456&quot;</span> &#125;;</span><br><span class="line">    <span class="type">char</span>* str2&#123; (<span class="type">char</span>*)<span class="string">&quot;123456&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 本质是对比指针地址，但由于编译器对内存使用的优化</span></span><br><span class="line">    <span class="comment">// 考虑到初始化的两个常量一样，故两个指针指向同一块内存空间</span></span><br><span class="line">    <span class="keyword">if</span> (str1 == str2)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;相等&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// string重载== !=，&gt; 等，可直接比较【中文支持不好】</span></span><br><span class="line">    string str3&#123; <span class="string">&quot;1234&quot;</span> &#125;;</span><br><span class="line">    string str4&#123; <span class="string">&quot;12345&quot;</span> &#125;;</span><br><span class="line">    <span class="keyword">if</span> (str3 == str4)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;equal&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;no equal&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// compare函数比较：返回int：等则0；大于则正数；小于则负数</span></span><br><span class="line">    <span class="keyword">if</span> (str<span class="number">3.</span><span class="built_in">compare</span>(str4) != <span class="number">0</span>)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;no equal&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// compare重载：str.compare(起始位置，参与比较的长度，被比较的字符串)</span></span><br><span class="line">    <span class="keyword">if</span> (str<span class="number">4.</span><span class="built_in">compare</span>(<span class="number">0</span>, <span class="number">4</span>, str3) == <span class="number">0</span>)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;equal&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// compare重载：str.compare(起始位置，参与比较的长度，被比较的字符串, 被比较字符串起始位置，参与长度)</span></span><br><span class="line">    <span class="keyword">if</span> (str<span class="number">4.</span><span class="built_in">compare</span>(<span class="number">0</span>, <span class="number">3</span>, str3, <span class="number">0</span>, <span class="number">3</span>) == <span class="number">0</span>)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;equal&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符串搜索功能:返回无符号整数【子串第一次出现的位置】</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;34第一次出现的位置：&quot;</span> &lt;&lt; str<span class="number">4.f</span>ind(<span class="string">&quot;34&quot;</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// find重载：str.find(子串，从第n个位置开始查)</span></span><br><span class="line">    <span class="comment">// find重载：str.find(子串，从第n个位置开始查，纳入搜索的长度)</span></span><br><span class="line">    <span class="comment">// 当find返回std::string::npos时，表示未找到【如果是int型，=-1】</span></span><br><span class="line">    cout &lt;&lt; str<span class="number">4.f</span>ind(<span class="string">&quot;347&quot;</span>) &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// str.insert(要插入的位置，str_insert)</span></span><br><span class="line">    <span class="comment">// insert重载：str.insert(要插入的位置，插入字符个数，字符如‘*’)</span></span><br><span class="line">    <span class="comment">// insert重载：str.insert(要插入的位置，str_insert,要插入字符串的起始位置，插入字符串长度)</span></span><br><span class="line">    <span class="comment">// insert重载：str.insert(要插入的位置，str_insert，要插入字符串的长度)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// str.replace(str中的起始位置，str中要替换的长度，替换字符串str1)</span></span><br><span class="line">    <span class="comment">// str.replace(str中的起始位置，str中要替换的长度，替换字符长度，字符)</span></span><br><span class="line">    <span class="comment">// str.replace(str中的起始位置，str中要替换的长度，替换字符串str1, str1的节选长度)</span></span><br><span class="line">    <span class="comment">// str.replace(str中的起始位置，str中要替换的长度，替换字符串str1, str1的起始位置， str1的节选长度)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// str.erase(删除的起始位置，删除长度);</span></span><br><span class="line">    <span class="comment">// str.erase(删除的起始位置);</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>知识补充：</strong></p><ul><li>string类的实例，可以用数组的方式访问特定的字符，如<code>str[1]</code>;但中文支持不佳</li></ul><h5 id="2-6-4-指针数组字符串"><a href="#2-6-4-指针数组字符串" class="headerlink" title="2.6.4 指针数组字符串"></a>2.6.4 指针数组字符串</h5><p>C++11之前，与C字符串（<code>char*</code>）不同的是，C字符串以0结尾，而string有专门记录长度的属性，故实现的过程中没有严格要求以0结尾。</p><p>C++11后，要求string以0结尾。</p><ul><li>通过 <code>.c_str()</code> 方法得到一个 <code>const char*</code> 的指针，指向str存储字符数据的内存空间【<code>str[0]</code>】</li><li>通过 <code>.data()</code> 方法得到一个 <code>const char*</code> 的指针，指向str存储字符数据的内存空间【C++17之后，返回一个非常量的指针】</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string str&#123; <span class="string">&quot;123456&quot;</span> &#125;;</span><br><span class="line">    cout &lt;&lt; str[<span class="number">0</span>] &lt;&lt; endl; <span class="comment">// 输出1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 16进制地址/int型地址：发现str地址与str[0]地址不一致【string】</span></span><br><span class="line">    cout &lt;&lt; &amp;str &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;str &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;str[<span class="number">0</span>] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;str[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//0000006ADF0FF518 -552602344 -552602336 -552602335</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符串拼接后：当拼接后依然较小，地址不变</span></span><br><span class="line">    str += <span class="string">&quot;ddd&quot;</span>;</span><br><span class="line">    cout &lt;&lt; &amp;str &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;str &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;str[<span class="number">0</span>] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;str[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//0000006ADF0FF518 -552602344 -552602336 -552602335</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符串拼接后：当拼接后较大，str地址不变，但str[0]首地址变化</span></span><br><span class="line">    str += <span class="string">&quot;dddddddddddddddddddddddddddddddddddddddddddddddddddddddddd&quot;</span>;</span><br><span class="line">    cout &lt;&lt; &amp;str &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;str &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;str[<span class="number">0</span>] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;str[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//0000006ADF0FF518 -552602344 857627760 857627761</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 指向str存储字符数据的内存空间</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* baseStr = str.<span class="built_in">c_str</span>();</span><br><span class="line">    cout &lt;&lt; (<span class="type">int</span>)baseStr &lt;&lt; endl;/ <span class="number">857627760</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 强制转换的方式来更改</span></span><br><span class="line">    <span class="comment">//char* baseStr = (char*)str.c_str();</span></span><br><span class="line">    <span class="comment">//baseStr[0] = &#x27;5&#x27;;</span></span><br><span class="line">    <span class="comment">//cout &lt;&lt; (int)baseStr &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-6-5-字符串转数字"><a href="#2-6-5-字符串转数字" class="headerlink" title="2.6.5 字符串转数字"></a>2.6.5 字符串转数字</h5><p><code>std::to_string(数字)</code> 可以将数字转换为字符串，以下将字符串转为数字【C++11】：</p><ul><li>int【std::stoi(str)】</li><li>long【std::stol(str)】</li><li>long long【std::stoll(str)】</li><li>unsigned long【std::stoul(str)】</li><li>unsigned long long【std::stoull (str)】</li><li>float【std::stof(str)】</li><li>double【std::stod(str)】</li><li>long double【std::stold (str)】</li></ul><h5 id="2-6-6-字符串流-stringstream"><a href="#2-6-6-字符串流-stringstream" class="headerlink" title="2.6.6 字符串流 stringstream"></a>2.6.6 字符串流 stringstream</h5><p>std::stringstream 定义在<code>&lt;sstream&gt;</code>中，std::cout 组织数据的形式基本比string要方便。</p><p>std::stringstream.str()：返回一个string，包含std::stringstream的内容</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    stringstream strs;</span><br><span class="line">    <span class="comment">// 字符串均流进stringstream</span></span><br><span class="line">    strs &lt;&lt; <span class="string">&quot;你好&quot;</span> &lt;&lt; <span class="string">&quot;123&quot;</span> &lt;&lt; <span class="number">456</span> &lt;&lt; std::hex &lt;&lt; <span class="number">2048</span>;</span><br><span class="line">    <span class="comment">// 从stringstream中提取字符串</span></span><br><span class="line">    string str = strs.<span class="built_in">str</span>();</span><br><span class="line">    cout &lt;&lt; str &lt;&lt; endl;<span class="comment">//你好123456800</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-6-7-练习1"><a href="#2-6-7-练习1" class="headerlink" title="2.6.7 练习1"></a>2.6.7 练习1</h5><p>要求：不使用<code>strlen</code>来计算 <code>char[]</code> 字符串长度，用户只能输入英文和数字。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">StrLength</span><span class="params">(<span class="type">char</span>* A)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (*A != <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + <span class="built_in">StrLength</span>(A + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> str[<span class="number">0xff</span>];</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;输入字符串：&quot;</span>;</span><br><span class="line">    cin &gt;&gt; str;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;字符串长度为：&quot;</span> &lt;&lt; <span class="built_in">StrLength</span>(str) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-6-8-练习2"><a href="#2-6-8-练习2" class="headerlink" title="2.6.8 练习2"></a>2.6.8 练习2</h5><p>计算字符串长度，其中英混合。</p><blockquote><p>英文占一个字节，值在<code>0~127</code>；中文两个字节，第一个字节小于0</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string str;</span><br><span class="line">    cin &gt;&gt; str;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> length&#123; <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; str[i]; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (str[i] &lt; <span class="number">0</span>)</span><br><span class="line">            i++;</span><br><span class="line">        length++;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; length &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意：C++11之后，string末尾以0结尾。</p></blockquote><h5 id="2-6-9-练习3"><a href="#2-6-9-练习3" class="headerlink" title="2.6.9 练习3"></a>2.6.9 练习3</h5><p>要求：原生字符串的拼接</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> str1[<span class="number">0x10</span>] = <span class="string">&quot;123&quot;</span>;</span><br><span class="line">    <span class="type">char</span> str2[<span class="number">0x10</span>] = <span class="string">&quot;456&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="type">char</span> str[<span class="number">0x20</span>];</span><br><span class="line">    <span class="built_in">memcpy</span>(str, str1, <span class="built_in">strlen</span>(str1));</span><br><span class="line">    <span class="built_in">memcpy</span>(str + <span class="built_in">strlen</span>(str1), str2, <span class="built_in">strlen</span>(str2) + <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="2-7-布尔类型-bool"><a href="#2-7-布尔类型-bool" class="headerlink" title="2.7 布尔类型 bool"></a>2.7 布尔类型 bool</h4><p>作用：布尔数据类型代表真或假的值。</p><p>bool类型只有两个值：</p><ul><li>true — 真（本质是1）</li><li>false — 假（本质是0）</li></ul><p><strong>bool类型占<span style="background:#ff0">1个字节</span>大小（只要不为0，就为true）</strong></p><br><h4 id="2-8-推断类型auto"><a href="#2-8-推断类型auto" class="headerlink" title="2.8 推断类型auto"></a>2.8 推断类型auto</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// auto</span></span><br><span class="line"><span class="comment">// 定义auto变量：auto 变量名 &#123;初始值&#125;</span></span><br><span class="line"><span class="comment">// 查看变量类型：typeid(变量).name()</span></span><br></pre></td></tr></table></figure><p>使用时机后续补充</p><br><h4 id="2-9-枚举类型"><a href="#2-9-枚举类型" class="headerlink" title="2.9 枚举类型"></a>2.9 枚举类型</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// enum class 类型名称：基本类型 &#123;...&#125;  -----&gt; 可用于替代#define多次定义宏常量</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Normal 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Hign 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Rare 2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Epic 3</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Legend 4</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Myth 5</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 定义枚举类型【默认int】</span></span><br><span class="line">    <span class="keyword">enum class</span> <span class="title class_">EquipLV</span> :<span class="type">int</span> &#123;</span><br><span class="line">        normal = <span class="number">10</span>,<span class="comment">// 后面会自增+1</span></span><br><span class="line">        high,</span><br><span class="line">        rare,</span><br><span class="line">        epic,</span><br><span class="line">        legeng,</span><br><span class="line">        myth = <span class="number">100</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 声明枚举类型</span></span><br><span class="line">    EquipLV weaponA&#123; EquipLV::high &#125;;</span><br><span class="line">    EquipLV weaponB&#123; EquipLV::myth &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 枚举类型的计算需要强制转换</span></span><br><span class="line">    <span class="type">short</span> diff = (<span class="type">int</span>)weaponA - (<span class="type">int</span>)weaponB;</span><br><span class="line">    std::cout &lt;&lt; diff;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="2-10-数据的输入"><a href="#2-10-数据的输入" class="headerlink" title="2.10  数据的输入"></a>2.10 数据的输入</h4><p><strong>作用：用于从键盘获取数据</strong></p><p><strong>关键字：</strong>cin</p><p><strong>语法：</strong> <code>cin &gt;&gt; 变量</code></p><p>示例：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//整型输入</span></span><br><span class="line">    <span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入整型变量：&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cin &gt;&gt; a;</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//浮点型输入</span></span><br><span class="line">    <span class="type">double</span> d = <span class="number">0</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入浮点型变量：&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cin &gt;&gt; d;</span><br><span class="line">    cout &lt;&lt; d &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//字符型输入</span></span><br><span class="line">    <span class="type">char</span> ch = <span class="number">0</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入字符型变量：&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cin &gt;&gt; ch;</span><br><span class="line">    cout &lt;&lt; ch &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//字符串型输入</span></span><br><span class="line">    string str;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入字符串型变量：&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cin &gt;&gt; str;</span><br><span class="line">    cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//布尔类型输入</span></span><br><span class="line">    <span class="type">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入布尔型变量：&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cin &gt;&gt; flag;</span><br><span class="line">    cout &lt;&lt; flag &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="2-11-类型转换"><a href="#2-11-类型转换" class="headerlink" title="2.11 类型转换"></a>2.11 类型转换</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a&#123;<span class="number">500</span>&#125;;</span><br><span class="line">    <span class="type">unsigned</span> b&#123; <span class="number">1000</span> &#125;;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> a1&#123;<span class="number">500</span>&#125;;</span><br><span class="line">    std::cout &lt;&lt; a-b &lt;&lt; std::endl;</span><br><span class="line">    <span class="comment">// out:4294966796</span></span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">int</span>(a-b) &lt;&lt; std::endl;</span><br><span class="line">    <span class="comment">// out:-500</span></span><br><span class="line">    std::cout &lt;&lt; a1-b &lt;&lt; std::endl;</span><br><span class="line">    <span class="comment">// out:-500</span></span><br><span class="line">    a -= b;</span><br><span class="line">    std::cout &lt;&lt; a &lt;&lt; std::endl; </span><br><span class="line">    <span class="comment">// out:-500</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 原因：类型转换顺序表---【隐式转换】</span></span><br><span class="line"><span class="comment">// long double</span></span><br><span class="line"><span class="comment">// double</span></span><br><span class="line"><span class="comment">// float</span></span><br><span class="line"><span class="comment">// unsigned long long</span></span><br><span class="line"><span class="comment">// long long</span></span><br><span class="line"><span class="comment">// unsigned long</span></span><br><span class="line"><span class="comment">// long</span></span><br><span class="line"><span class="comment">// unsigned int</span></span><br><span class="line"><span class="comment">// int</span></span><br><span class="line"><span class="comment">// 故a-b后类型为unsigned int，即-500 = 4294966796</span></span><br></pre></td></tr></table></figure><blockquote><p><code>sizeof</code>：返回占用字节数</p></blockquote><p><strong>显式转换</strong></p><p>C++的方式更稳妥，当保证不会出错时可以用C的方式。</p><table><thead><tr><th>语言</th><th>操作</th><th>举例</th></tr></thead><tbody><tr><td>C++</td><td>static_cast&lt;目标类型&gt;(转换的内容)</td><td><code>int a = static_cast&lt;int&gt;(b);</code></td></tr><tr><td>C</td><td>类型(转换的内容)</td><td><code>int a = (int)b;</code></td></tr></tbody></table><br><h4 id="2-12-格式化输出流"><a href="#2-12-格式化输出流" class="headerlink" title="2.12 格式化输出流"></a>2.12 格式化输出流</h4><p><img src="./cpp1-10.png"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="number">3E20</span> &lt;&lt; <span class="string">&#x27;,&#x27;</span>;</span><br><span class="line">    std::cout &lt;&lt; std::fixed;</span><br><span class="line">    std::cout &lt;&lt; <span class="number">3E20</span>;</span><br><span class="line">    <span class="comment">// 3e+20,300000000000000000000.000000</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 后面的 setW() setfill() left right都很有用</span></span><br></pre></td></tr></table></figure><p><code>printf</code>是个函数，<code>std</code>是个类。<code>printf(&quot;字符串%s,%d&quot;,&quot;张三&quot;,20);</code></p><table><thead><tr><th align="center">标志</th><th align="left">说明</th></tr></thead><tbody><tr><td align="center">d</td><td align="left">十进制整数</td></tr><tr><td align="center">o</td><td align="left">八进制整数</td></tr><tr><td align="center">u</td><td align="left">无符号十进制整数</td></tr><tr><td align="center">x/X</td><td align="left">十六进制整数</td></tr><tr><td align="center">f</td><td align="left">float小数</td></tr><tr><td align="center">lf</td><td align="left">double小数</td></tr><tr><td align="center">s</td><td align="left">字符串%s</td></tr><tr><td align="center">0</td><td align="left">用0补齐，如%05d，00001</td></tr><tr><td align="center">+</td><td align="left">替数字输出正负符号%+d，如+1</td></tr></tbody></table><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a); <span class="comment">// 目前c++认为不安全，需要加#define _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">scanf_s</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 无显示输入:头文件 #include &lt;conio.h&gt;  </span></span><br><span class="line"><span class="type">int</span> _getch() <span class="comment">// 多用于游戏获取键位输入</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="3、运算符"><a href="#3、运算符" class="headerlink" title="3、运算符"></a>3、运算符</h3><p><strong>作用：</strong>用于执行代码的运算</p><p>本章我们主要讲解以下几类运算符：</p><table><thead><tr><th><strong>运算符类型</strong></th><th><strong>作用</strong></th></tr></thead><tbody><tr><td>算术运算符</td><td>用于处理四则运算</td></tr><tr><td>赋值运算符</td><td>用于将表达式的值赋给变量</td></tr><tr><td>比较运算符</td><td>用于表达式的比较，并返回一个真值或假值</td></tr><tr><td>逻辑运算符</td><td>用于根据表达式的值返回真值或假值</td></tr></tbody></table><h4 id="3-1-算术运算符"><a href="#3-1-算术运算符" class="headerlink" title="3.1 算术运算符"></a>3.1 算术运算符</h4><p><strong>作用</strong>：用于处理四则运算</p><p>算术运算符包括以下符号：</p><table><thead><tr><th><strong>运算符</strong></th><th><strong>术语</strong></th><th><strong>示例</strong></th><th><strong>结果</strong></th></tr></thead><tbody><tr><td>+</td><td>正号</td><td>+3</td><td>3</td></tr><tr><td>-</td><td>负号</td><td>-3</td><td>-3</td></tr><tr><td>+</td><td>加</td><td>10 + 5</td><td>15</td></tr><tr><td>-</td><td>减</td><td>10 - 5</td><td>5</td></tr><tr><td>*</td><td>乘</td><td>10 * 5</td><td>50</td></tr><tr><td>/</td><td>除</td><td>10 / 5</td><td>2</td></tr><tr><td>%</td><td>取模(取余)</td><td>10 % 3</td><td>1</td></tr><tr><td>++</td><td>前置递增</td><td>a=2; b=++a;</td><td>a=3; b=3;</td></tr><tr><td>++</td><td>后置递增</td><td>a=2; b=a++;</td><td>a=3; b=2;</td></tr><tr><td>–</td><td>前置递减</td><td>a=2; b=–a;</td><td>a=1; b=1;</td></tr><tr><td>–</td><td>后置递减</td><td>a=2; b=a–;</td><td>a=1; b=2;</td></tr></tbody></table><blockquote><p>总结：在除法运算中，除数不能为0</p><p>总结：只有整型变量可以进行取模运算</p><p>总结：前置递增先对变量进行++，再计算表达式，后置递增相反</p></blockquote><h4 id="3-2-赋值运算符"><a href="#3-2-赋值运算符" class="headerlink" title="3.2 赋值运算符"></a>3.2 赋值运算符</h4><p><strong>作用：</strong>用于将表达式的值赋给变量</p><p>赋值运算符包括以下几个符号：</p><table><thead><tr><th><strong>运算符</strong></th><th><strong>术语</strong></th><th><strong>示例</strong></th><th><strong>结果</strong></th></tr></thead><tbody><tr><td>=</td><td>赋值</td><td>a=2; b=3;</td><td>a=2; b=3;</td></tr><tr><td>+=</td><td>加等于</td><td>a=0; a+=2;</td><td>a=2;</td></tr><tr><td>-=</td><td>减等于</td><td>a=5; a-=3;</td><td>a=2;</td></tr><tr><td>*=</td><td>乘等于</td><td>a=2; a*=2;</td><td>a=4;</td></tr><tr><td>/=</td><td>除等于</td><td>a=4; a/=2;</td><td>a=2;</td></tr><tr><td>%=</td><td>模等于</td><td>a=3; a%2;</td><td>a=1;</td></tr></tbody></table><h4 id="3-3-比较运算符"><a href="#3-3-比较运算符" class="headerlink" title="3.3 比较运算符"></a>3.3 比较运算符</h4><p><strong>作用：</strong>用于表达式的比较，并返回一个真值或假值</p><p>比较运算符有以下符号：</p><table><thead><tr><th><strong>运算符</strong></th><th><strong>术语</strong></th><th><strong>示例</strong></th><th><strong>结果</strong></th></tr></thead><tbody><tr><td>==</td><td>相等于</td><td>4 == 3</td><td>0</td></tr><tr><td>!=</td><td>不等于</td><td>4 != 3</td><td>1</td></tr><tr><td>&lt;</td><td>小于</td><td>4 &lt; 3</td><td>0</td></tr><tr><td>&gt;</td><td>大于</td><td>4 &gt; 3</td><td>1</td></tr><tr><td>&lt;=</td><td>小于等于</td><td>4 &lt;= 3</td><td>0</td></tr><tr><td>&gt;=</td><td>大于等于</td><td>4 &gt;= 1</td><td>1</td></tr></tbody></table><blockquote><p>注意：C和C++ 语言的比较运算中，<span style="background:#ff0">“真”用数字“1”来表示， “假”用数字“0”来表示。</span></p></blockquote><h4 id="3-4-逻辑运算符"><a href="#3-4-逻辑运算符" class="headerlink" title="3.4 逻辑运算符"></a>3.4 逻辑运算符</h4><p><strong>作用：</strong>用于根据表达式的值返回真值或假值</p><p>逻辑运算符有以下符号：</p><table><thead><tr><th><strong>运算符</strong></th><th><strong>术语</strong></th><th><strong>示例</strong></th><th><strong>结果</strong></th></tr></thead><tbody><tr><td>!</td><td>非</td><td>!a</td><td>如果a为假，则!a为真； 如果a为真，则!a为假。</td></tr><tr><td>&amp;&amp;</td><td>与</td><td>a &amp;&amp; b</td><td>如果a和b都为真，则结果为真，否则为假。</td></tr><tr><td>||</td><td>或</td><td>a || b</td><td>如果a和b有一个为真，则结果为真，二者都为假时，结果为假。</td></tr></tbody></table><h4 id="3-5-位运算"><a href="#3-5-位运算" class="headerlink" title="3.5 位运算"></a>3.5 位运算</h4><table><thead><tr><th><strong>运算符</strong></th><th><strong>术语</strong></th><th><strong>示例</strong></th></tr></thead><tbody><tr><td>&lt;&lt;</td><td>左移</td><td><code>a &lt;&lt; 1</code></td></tr><tr><td><code>&gt;&gt;</code></td><td>右移</td><td><code>a &gt;&gt; 1</code></td></tr><tr><td><code>~</code></td><td>取反</td><td><code>~b</code></td></tr><tr><td><code>&amp;</code></td><td>求与</td><td><code>a &amp; b</code></td></tr><tr><td><code>^</code></td><td>异或</td><td><code>a ^ b</code></td></tr></tbody></table><blockquote><p>无符号数的左移右移补0，正数补，负数补0</p><p>其他情况详见 <strong>计算机组成原理</strong></p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 二进制显示</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bitset&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a&#123; (<span class="type">int</span>)<span class="number">0b11111111111111110000000000000000</span> &#125;;</span><br><span class="line">    std::cout &lt;&lt; a &lt;&lt; <span class="string">&#x27;,&#x27;</span>;</span><br><span class="line">    std::cout &lt;&lt; std::<span class="built_in">bitset</span>&lt;<span class="number">32</span>&gt;(a);</span><br><span class="line">    <span class="comment">// -65536,11111111111111110000000000000000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-5-运算符优先级"><a href="#3-5-运算符优先级" class="headerlink" title="3.5 运算符优先级"></a>3.5 运算符优先级</h4><p><span style="background:#e53a40"><strong>注意：运算符优先级【十八级】</strong></span></p><ul><li><p>第一优先级：作用域解析运算符 <code>::</code></p></li><li><p>第二优先级：结合运算符【函数调用、数组下标、取成员、类型转换、后置运算符等】【从左向右】</p><p>如 <code>() [] -&gt; . typeid ++ --</code>【后缀】</p></li><li><p>第三优先级：一元运算符</p><p>如：<code>! ~ + - ++ -- &amp; *</code> <code>()【类型转换】</code> <code>sizeof new new[] delete delete[]</code></p></li><li><p>第四优先级：类成员指针运算符：<code>.* -&gt;*</code></p></li><li><p>第五优先级：乘除模：<code>* / %</code></p></li><li><p>第六优先级：加减 <code>+ -</code></p></li><li><p>第七优先级：移位运算符： <code>&gt;&gt; &lt;&lt;</code></p></li><li><p>第八优先级：比较运算符：<code>&lt; &lt;= &gt; &gt;=</code></p></li><li><p>第九优先级：比较运算符：<code>== !=</code></p></li><li><p>第十十一十二级：<code>&amp;【AND】^【异或】|【或】</code></p></li><li><p>第十三十四级：&amp;&amp;【且】 ||【或】</p></li><li><p>第十五级：三目运算符：<code>:?</code></p></li><li><p>第十六级：赋值运算符</p></li><li><p>第十七级：<code>引发异常 throw</code></p></li><li><p>第十八级：<code>,【逗号】</code></p></li></ul><br><h3 id="4、-程序流程结构"><a href="#4、-程序流程结构" class="headerlink" title="4、 程序流程结构"></a>4、 程序流程结构</h3><p>C/C++支持最基本的三种程序运行结构：<span style="background:#ff0">顺序结构、选择结构、循环结构</span></p><ul><li>顺序结构：程序按顺序执行，不发生跳转</li><li>选择结构：依据条件是否满足，有选择的执行相应功能</li><li>循环结构：依据条件是否满足，循环多次执行某段代码</li></ul><h4 id="4-1-选择结构"><a href="#4-1-选择结构" class="headerlink" title="4.1 选择结构"></a>4.1 选择结构</h4><h5 id="4-1-1-if语句"><a href="#4-1-1-if语句" class="headerlink" title="4.1.1 if语句"></a>4.1.1 if语句</h5><p><strong>作用：</strong>执行满足条件的语句</p><p>if语句的三种形式</p><ul><li>单行格式if语句：<code>if(条件)&#123; 条件满足执行的语句 &#125;</code></li><li>多行格式if语句：<code>if(条件)&#123; 条件满足执行的语句 &#125;else&#123; 条件不满足执行的语句 &#125;;</code></li><li>多条件的if语句：<code>if(条件1)&#123; 条件1满足执行的语句 &#125;else if(条件2)&#123;条件2满足执行的语句&#125;... else&#123; 都不满足执行的语句&#125;</code></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(条件)&#123;</span><br><span class="line">    变量声明;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// c++17新语法【相应的在switch中也有体现】</span></span><br><span class="line"><span class="keyword">if</span>(变量声明; 条件)&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;&#125;</span><br></pre></td></tr></table></figure><br><h5 id="4-1-2-三目运算符"><a href="#4-1-2-三目运算符" class="headerlink" title="4.1.2 三目运算符"></a>4.1.2 三目运算符</h5><p><strong>作用：</strong> 通过三目运算符实现简单的判断</p><p><strong>语法：</strong><code>表达式1 ? 表达式2 ：表达式3</code></p><p><strong>解释：</strong></p><p>如果表达式1的值为真，执行表达式2，并返回表达式2的结果；</p><p>如果表达式1的值为假，执行表达式3，并返回表达式3的结果。</p><br><h5 id="4-1-3-switch语句"><a href="#4-1-3-switch语句" class="headerlink" title="4.1.3 switch语句"></a>4.1.3 switch语句</h5><p><strong>作用：</strong>执行多条件分支语句</p><p><strong>语法：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(表达式)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">case</span> 结果<span class="number">1</span>：执行语句;<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> 结果<span class="number">2</span>：执行语句;<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span>:执行语句;<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// c++17新语法</span></span><br><span class="line"><span class="keyword">switch</span>(变量声明; 表达式)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">case</span> 结果<span class="number">1</span>：执行语句; <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> 结果<span class="number">2</span>：执行语句; [[fallthrough]];</span><br><span class="line">    <span class="keyword">default</span>:执行语句;<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意1：switch语句中表达式类型只能是<strong>整型或者字符型</strong></p><p>注意2：case里如果没有break，那么程序会一直向下执行</p><p>注意3：c++17新增：<code>[[fallthrough]];</code> 用于替代不使用 <code>break</code> 的情况</p></blockquote><blockquote><p>总结：与if语句比，对于多条件判断时，switch的结构清晰，执行效率高，缺点是switch不可以判断区间</p><p>注意：if与switch的效率差异在于汇编不同。从汇编角度，switch将比较操作提前转换为一张字典表，每次执行swtich其实只是查表操作。</p></blockquote><h4 id="4-2-循环结构"><a href="#4-2-循环结构" class="headerlink" title="4.2 循环结构"></a>4.2 循环结构</h4><blockquote><p>执行效率：do_while &gt; while &gt; goto &gt; for</p></blockquote><h5 id="4-2-1-while循环语句"><a href="#4-2-1-while循环语句" class="headerlink" title="4.2.1 while循环语句"></a>4.2.1 while循环语句</h5><p><strong>作用：</strong>满足循环条件，执行循环语句</p><p><strong>语法：</strong><code>while(循环条件)&#123; 循环语句 &#125;</code></p><p><strong>解释：</strong>只要循环条件的结果为真，就执行循环语句</p><h5 id="4-2-2-do…while循环语句"><a href="#4-2-2-do…while循环语句" class="headerlink" title="4.2.2 do…while循环语句"></a>4.2.2 do…while循环语句</h5><p><strong>作用：</strong> 满足循环条件，执行循环语句</p><p><strong>语法：</strong> <code>do&#123; 循环语句 &#125; while(循环条件);</code></p><p><strong>注意：</strong>与while的区别在于<span style="background:#ff0">do…while会先执行一次循环语句</span>，再判断循环条件</p><h5 id="4-2-3-for循环语句"><a href="#4-2-3-for循环语句" class="headerlink" title="4.2.3 for循环语句"></a>4.2.3 for循环语句</h5><p><strong>作用：</strong> 满足循环条件，执行循环语句</p><p><strong>语法：</strong><code>for(起始表达式;条件表达式;末尾循环体) &#123; 循环语句; &#125;</code></p><p><strong>逻辑：</strong>起始表达式 -&gt; 判断条件表达式 -&gt; 执行循环内容 -&gt; 执行末尾循环体 -&gt; 判断……</p><h5 id="4-2-4-嵌套循环"><a href="#4-2-4-嵌套循环" class="headerlink" title="4.2.4 嵌套循环"></a>4.2.4 嵌套循环</h5><p><strong>作用：</strong> 在循环体中再嵌套一层循环，解决一些实际问题</p><h4 id="4-3-跳转语句"><a href="#4-3-跳转语句" class="headerlink" title="4.3 跳转语句"></a>4.3 跳转语句</h4><h5 id="4-3-1-break语句"><a href="#4-3-1-break语句" class="headerlink" title="4.3.1 break语句"></a>4.3.1 break语句</h5><p><strong>作用:</strong> 用于跳出<span style="background:#ff0">选择结构</span>或者<span style="background:#ff0">循环结构</span></p><p>break使用的时机：</p><ul><li>出现在switch条件语句中，作用是终止case并跳出switch</li><li>出现在循环语句中，作用是跳出当前的循环语句</li><li>出现在嵌套循环中，跳出最近的内层循环语句</li></ul><h5 id="4-3-2-continue语句"><a href="#4-3-2-continue语句" class="headerlink" title="4.3.2 continue语句"></a>4.3.2 continue语句</h5><p><strong>作用：</strong>在<span style="background:#ff0">循环语句</span>中，跳过本次循环中余下尚未执行的语句，继续执行下一次循环</p><blockquote><p>注意：continue并没有使整个循环终止，而break会跳出循环</p></blockquote><h5 id="4-3-3-goto语句"><a href="#4-3-3-goto语句" class="headerlink" title="4.3.3 goto语句"></a>4.3.3 goto语句</h5><p><strong>作用：</strong>可以无条件跳转语句</p><p><strong>语法：</strong> <code>goto 标记;</code></p><p><strong>解释：</strong>如果标记的名称存在，执行到goto语句时，会跳转到标记的位置</p><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">goto</span> FLAG;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;2&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;3&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;4&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    FLAG:</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;5&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意：在程序中不建议使用goto语句，以免造成程序流程混乱</p></blockquote><h4 id="4-4-生命周期"><a href="#4-4-生命周期" class="headerlink" title="4.4 生命周期"></a>4.4 生命周期</h4><h5 id="4-4-1-命名空间"><a href="#4-4-1-命名空间" class="headerlink" title="4.4.1 命名空间"></a>4.4.1 命名空间</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 命名空间定义不放在函数体内</span></span><br><span class="line"><span class="comment">// 可以嵌套定义</span></span><br><span class="line"><span class="comment">// 子级命名空间调用父级命名空间依然需要限定符</span></span><br><span class="line"><span class="keyword">namespace</span> name &#123;</span><br><span class="line">    <span class="type">int</span> HP&#123; <span class="number">1000</span> &#125;;</span><br><span class="line">    <span class="type">int</span> Mp&#123; <span class="number">100</span> &#125;;</span><br><span class="line">    <span class="keyword">namespace</span> Weapon &#123;</span><br><span class="line">        <span class="type">int</span> lv1 = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> lv2 = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//using std::cout;// 推荐</span></span><br><span class="line">    <span class="comment">//using std::cin;</span></span><br><span class="line">    <span class="comment">//using namespace::cout;</span></span><br><span class="line">    <span class="comment">// 很方便，但当命名空间多了之后会出现冲突 </span></span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">    name::HP = <span class="number">500</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;无需std1,&quot;</span> &lt;&lt; name::HP &lt;&lt;<span class="string">&#x27;,&#x27;</span>&lt;&lt; name::Weapon::lv2;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    cin &gt;&gt; a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4-4-2-生命周期"><a href="#4-4-2-生命周期" class="headerlink" title="4.4.2 生命周期"></a>4.4.2 生命周期</h5><ul><li>代码块中，变量的生命周期从声明开始，直到这个代码块结束</li><li>声明在代码块之前的为全局变量，其生命周期直到程序退出</li><li>变量名冲突情况，采用就近原则</li><li>可以使用限定符来访问冲突的全局变量</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a&#123; <span class="number">160</span> &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a&#123; <span class="number">350</span> &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">char</span> a = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; ::a &lt;&lt; endl; <span class="comment">// 访问全局变量</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="5、数组"><a href="#5、数组" class="headerlink" title="5、数组"></a>5、数组</h3><h4 id="5-1-概述"><a href="#5-1-概述" class="headerlink" title="5.1 概述"></a>5.1 概述</h4><p>所谓数组，就是一个集合，里面存放了相同类型的数据元素</p><p><strong>特点1：</strong>数组中的每个<span style="background:#ff0">数据元素都是相同的数据类型</span></p><p><strong>特点2：</strong>数组是由<span style="background:#ff0">连续的内存</span>位置组成的</p><blockquote><p>变量不初始化编译器不让用，但数组不初始化是可以用的</p><p>但建议初始化，使用 <code>int array[10]&#123;&#125;; // 用0初始化</code></p></blockquote><h4 id="5-2-一维数组"><a href="#5-2-一维数组" class="headerlink" title="5.2 一维数组"></a>5.2 一维数组</h4><h5 id="5-2-1-一维数组定义方式"><a href="#5-2-1-一维数组定义方式" class="headerlink" title="5.2.1 一维数组定义方式"></a>5.2.1 一维数组定义方式</h5><p>一维数组定义的三种方式：</p><ol><li><code>数据类型 数组名[ 数组长度 ];</code></li><li><code>数据类型 数组名[ 数组长度 ] = &#123; 值1，值2 ...&#125;;</code></li><li><code>数据类型 数组名[ ] = &#123; 值1，值2 ...&#125;;</code></li></ol><p><strong>示例</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义方式1</span></span><br><span class="line">    <span class="comment">//数据类型 数组名[元素个数];</span></span><br><span class="line">    <span class="type">int</span> score[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//利用下标赋值</span></span><br><span class="line">    score[<span class="number">0</span>] = <span class="number">100</span>;</span><br><span class="line">    score[<span class="number">1</span>] = <span class="number">99</span>;</span><br><span class="line">    score[<span class="number">2</span>] = <span class="number">85</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//利用下标输出</span></span><br><span class="line">    cout &lt;&lt; score[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; score[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; score[<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//第二种定义方式</span></span><br><span class="line">    <span class="comment">//数据类型 数组名[元素个数] =  &#123;值1，值2 ，值3 ...&#125;;</span></span><br><span class="line">    <span class="comment">//如果&#123;&#125;内不足10个数据，剩余数据用0补全</span></span><br><span class="line">    <span class="type">int</span> score2[<span class="number">10</span>] = &#123; <span class="number">100</span>, <span class="number">90</span>,<span class="number">80</span>,<span class="number">70</span>,<span class="number">60</span>,<span class="number">50</span>,<span class="number">40</span>,<span class="number">30</span>,<span class="number">20</span>,<span class="number">10</span> &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//逐个输出</span></span><br><span class="line">    <span class="comment">//cout &lt;&lt; score2[0] &lt;&lt; endl;</span></span><br><span class="line">    <span class="comment">//cout &lt;&lt; score2[1] &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//利用循环进行输出</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; score2[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义方式3</span></span><br><span class="line">    <span class="comment">//数据类型 数组名[] =  &#123;值1，值2 ，值3 ...&#125;;</span></span><br><span class="line">    <span class="type">int</span> score3[] = &#123; <span class="number">100</span>,<span class="number">90</span>,<span class="number">80</span>,<span class="number">70</span>,<span class="number">60</span>,<span class="number">50</span>,<span class="number">40</span>,<span class="number">30</span>,<span class="number">20</span>,<span class="number">10</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; score3[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="5-2-2-一维数组数组名"><a href="#5-2-2-一维数组数组名" class="headerlink" title="5.2.2 一维数组数组名"></a>5.2.2 一维数组数组名</h5><p>一维数组名称的<strong>用途</strong>：</p><ol><li>可以统计整个数组在内存中的长度</li><li>可以获取数组在内存中的首地址</li></ol><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//数组名用途</span></span><br><span class="line">    <span class="comment">//1、可以获取整个数组占用内存空间大小</span></span><br><span class="line">    <span class="type">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> &#125;;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;整个数组所占内存空间为： &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;每个元素所占内存空间为： &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr[<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;数组的元素个数为： &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr) / <span class="built_in">sizeof</span>(arr[<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、可以通过数组名获取到数组首地址</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;数组首地址为： &quot;</span> &lt;&lt; (<span class="type">int</span>)arr &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;数组中第一个元素地址为： &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;arr[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;数组中第二个元素地址为： &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;arr[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//arr = 100; 错误，数组名是常量，因此不可以赋值</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="5-2-3-冒泡排序"><a href="#5-2-3-冒泡排序" class="headerlink" title="5.2.3 冒泡排序"></a>5.2.3 冒泡排序</h5><p><strong>作用：</strong> 最常用的排序算法，对数组内元素进行排序</p><ol><li>比较相邻的元素。如果第一个比第二个大，就交换他们两个。</li><li>对每一对相邻元素做同样的工作，执行完毕后，找到第一个最大值。</li><li>重复以上的步骤，每次比较次数-1，直到不需要比较</li></ol><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将数组 &#123; 4,2,8,0,5,7,1,3,9 &#125; 进行升序排序</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> arr[<span class="number">9</span>] = &#123; <span class="number">4</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">9</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span> - <span class="number">1</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">9</span> - <span class="number">1</span> - i; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> temp = arr[j];</span><br><span class="line">                arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; arr[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-3-二维数组"><a href="#5-3-二维数组" class="headerlink" title="5.3 二维数组"></a>5.3 二维数组</h4><p>二维数组就是在一维数组上，多加一个维度。</p><h5 id="5-3-1-二维数组定义方式"><a href="#5-3-1-二维数组定义方式" class="headerlink" title="5.3.1 二维数组定义方式"></a>5.3.1 二维数组定义方式</h5><p>二维数组定义的四种方式：</p><ol><li><code>数据类型 数组名[ 行数 ][ 列数 ];</code></li><li><code>数据类型 数组名[ 行数 ][ 列数 ] = &#123; &#123;数据1，数据2 &#125; ，&#123;数据3，数据4 &#125; &#125;;</code></li><li><code>数据类型 数组名[ 行数 ][ 列数 ] = &#123; 数据1，数据2，数据3，数据4&#125;;</code></li><li><code>数据类型 数组名[ ][ 列数 ] = &#123; 数据1，数据2，数据3，数据4&#125;;</code></li></ol><blockquote><p>建议：以上4种定义方式，利用<span style="background:#ff0">第二种更加直观，提高代码的可读性</span></p></blockquote><p>示例：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方式1  </span></span><br><span class="line">    <span class="comment">//数组类型 数组名 [行数][列数]</span></span><br><span class="line">    <span class="type">int</span> arr[<span class="number">2</span>][<span class="number">3</span>];</span><br><span class="line">    arr[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">    arr[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">3</span>;</span><br><span class="line">    arr[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">4</span>;</span><br><span class="line">    arr[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">5</span>;</span><br><span class="line">    arr[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; arr[i][j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方式2 </span></span><br><span class="line">    <span class="comment">//数据类型 数组名[行数][列数] = &#123; &#123;数据1，数据2 &#125; ，&#123;数据3，数据4 &#125; &#125;;</span></span><br><span class="line">    <span class="type">int</span> arr2[<span class="number">2</span>][<span class="number">3</span>] =</span><br><span class="line">    &#123;</span><br><span class="line">        &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">        &#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方式3</span></span><br><span class="line">    <span class="comment">//数据类型 数组名[行数][列数] = &#123; 数据1，数据2 ,数据3，数据4  &#125;;</span></span><br><span class="line">    <span class="type">int</span> arr3[<span class="number">2</span>][<span class="number">3</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span> &#125;; </span><br><span class="line"></span><br><span class="line">    <span class="comment">//方式4 </span></span><br><span class="line">    <span class="comment">//数据类型 数组名[][列数] = &#123; 数据1，数据2 ,数据3，数据4  &#125;;</span></span><br><span class="line">    <span class="type">int</span> arr4[][<span class="number">3</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span> &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>总结：在定义二维数组时，如果初始化了数据，可以省略行数</p></blockquote><h5 id="5-3-2-二维数组数组名"><a href="#5-3-2-二维数组数组名" class="headerlink" title="5.3.2 二维数组数组名"></a>5.3.2 二维数组数组名</h5><ul><li>查看二维数组所占内存空间</li><li>获取二维数组首地址</li></ul><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//二维数组数组名</span></span><br><span class="line">    <span class="type">int</span> arr[<span class="number">2</span>][<span class="number">3</span>] =</span><br><span class="line">    &#123;</span><br><span class="line">        &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">        &#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;二维数组大小： &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;二维数组一行大小： &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr[<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;二维数组元素大小： &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr[<span class="number">0</span>][<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;二维数组行数： &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr) / <span class="built_in">sizeof</span>(arr[<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;二维数组列数： &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr[<span class="number">0</span>]) / <span class="built_in">sizeof</span>(arr[<span class="number">0</span>][<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//地址</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;二维数组首地址：&quot;</span> &lt;&lt; arr &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;二维数组第一行地址：&quot;</span> &lt;&lt; arr[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;二维数组第二行地址：&quot;</span> &lt;&lt; arr[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;二维数组第一个元素地址：&quot;</span> &lt;&lt; &amp;arr[<span class="number">0</span>][<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;二维数组第二个元素地址：&quot;</span> &lt;&lt; &amp;arr[<span class="number">0</span>][<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>总结1：二维数组名就是这个数组的首地址</p></blockquote><blockquote><p>总结2：对二维数组名进行sizeof时，可以获取整个二维数组占用的内存空间大小</p></blockquote><h4 id="5-3-数组遍历"><a href="#5-3-数组遍历" class="headerlink" title="5.3 数组遍历"></a>5.3 数组遍历</h4><p>值得注意的是：<span style="background:#ff0">二维数组在内存中依然是顺序存放的，故其可以使用指针用一层for循环遍历。</span></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> stuID[]&#123;<span class="number">1001</span>,<span class="number">1002</span>,<span class="number">1003</span>,<span class="number">1004</span>,<span class="number">1005</span>,<span class="number">1006</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">sizeof</span>(stuID)/<span class="built_in">sizeof</span>(<span class="type">int</span>); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; stuID[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// for(变量类型 变量名：数组) c++11</span></span><br><span class="line">    <span class="comment">// for(auto 变量名：数组) c++11</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> a : stuID) &#123;</span><br><span class="line">        cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-4-std-array"><a href="#5-4-std-array" class="headerlink" title="5.4 std::array"></a>5.4 std::array</h4><blockquote><p>安全性更高，如自动检测数组越界</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;array&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    array&lt;<span class="type">int</span>,6&gt; stuID&#123;<span class="number">1001</span>,<span class="number">1002</span>,<span class="number">1003</span>,<span class="number">1004</span>,<span class="number">1005</span>,<span class="number">1006</span>&#125;;</span><br><span class="line">    array&lt;<span class="type">int</span>, 6&gt; stuID1&#123; <span class="number">1001</span>,<span class="number">1002</span>,<span class="number">1003</span>,<span class="number">1004</span>,<span class="number">1005</span>,<span class="number">1006</span> &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> a : stuID) &#123;</span><br><span class="line">        cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 该容器提供常见属性：.size() .fill(100) .at(1)等</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;数组大小：&quot;</span> &lt;&lt; stuID.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;是否相等：&quot;</span> &lt;&lt; (stuID == stuID1) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-4-std-vector"><a href="#5-4-std-vector" class="headerlink" title="5.4 std::vector"></a>5.4 std::vector</h4><blockquote><p>向量，也可以实现数组的功能。</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// std::vector&lt;数据类型&gt; 变量名;</span></span><br><span class="line"><span class="comment">// std::vector&lt;int&gt; stu;</span></span><br><span class="line"><span class="comment">// std::vector&lt;int&gt; stu&#123;1,2,3&#125;;</span></span><br><span class="line"><span class="comment">// std::vector&lt;int&gt; stu(5); // 设置5个元素</span></span><br><span class="line"><span class="comment">// std::vector&lt;int&gt; stu(5, 100); // 设置5个元素,每个元素初值100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 新方法：</span></span><br><span class="line"><span class="comment">// stu.push_back(1); // 在末尾添加</span></span><br><span class="line"><span class="comment">// stu.assign(10, 100); // 将vector重新初始化为拥有10个值为100的元素</span></span><br><span class="line"><span class="comment">// stu.clear(); // 清空</span></span><br><span class="line"><span class="comment">// stu.empty(); // 是不是空的？</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;array&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    array&lt;<span class="type">int</span>,6&gt; stuID&#123;<span class="number">1001</span>,<span class="number">1002</span>,<span class="number">1003</span>,<span class="number">1004</span>,<span class="number">1005</span>,<span class="number">1006</span>&#125;;</span><br><span class="line">    array&lt;<span class="type">int</span>, 6&gt; stuID1&#123; <span class="number">1001</span>,<span class="number">1002</span>,<span class="number">1003</span>,<span class="number">1004</span>,<span class="number">1005</span>,<span class="number">1006</span> &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> a : stuID) &#123;</span><br><span class="line">        cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 该容器提供常见属性：.size() .fill(100) .at(1)等</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;数组大小：&quot;</span> &lt;&lt; stuID.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;是否相等：&quot;</span> &lt;&lt; (stuID == stuID1) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="6、函数"><a href="#6、函数" class="headerlink" title="6、函数"></a>6、函数</h3><h4 id="6-1-概述"><a href="#6-1-概述" class="headerlink" title="6.1 概述"></a>6.1 概述</h4><p><strong>作用：</strong>将一段经常使用的代码封装起来，减少重复代码</p><p>一个较大的程序，一般分为若干个程序块，每个模块实现特定的功能。</p><h4 id="6-2-函数的定义"><a href="#6-2-函数的定义" class="headerlink" title="6.2 函数的定义"></a>6.2 函数的定义</h4><p>函数的定义一般主要有5个步骤：</p><ul><li>返回值类型</li><li>函数名</li><li>参数表列</li><li>函数体语句</li><li><code>return</code> 表达式</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数定义</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> sum = num1 + num2;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-3-参数类型"><a href="#6-3-参数类型" class="headerlink" title="6.3 参数类型"></a>6.3 参数类型</h4><h5 id="6-3-1-指针参数"><a href="#6-3-1-指针参数" class="headerlink" title="6.3.1 指针参数"></a>6.3.1 指针参数</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Role</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> hp;</span><br><span class="line">    <span class="type">int</span> mp;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Exp</span><span class="params">(Role r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> r.hp + r.mp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// const 限定为只读：常量指针</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Exp</span><span class="params">(<span class="type">const</span> Role* r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> r-&gt;hp + r-&gt;mp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span>* a, <span class="type">int</span>* b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    (*a) *= <span class="number">100</span>;</span><br><span class="line">    *b *= <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">return</span> *a + *b;<span class="comment">// 此处不加括号是否存在问题？</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//指针参数的应用场景一</span></span><br><span class="line">    <span class="type">int</span> x = <span class="number">1</span>, y = <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> z = <span class="built_in">add</span>(&amp;x, &amp;y);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;x=&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot; y=&quot;</span> &lt;&lt; y &lt;&lt; <span class="string">&quot; z=&quot;</span> &lt;&lt; z &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//指针参数的应用场景二</span></span><br><span class="line">    Role rl&#123; <span class="number">100</span>, <span class="number">200</span> &#125;;</span><br><span class="line">    <span class="type">int</span> p&#123; <span class="built_in">Exp</span>(&amp;rl) &#125;;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;p=&quot;</span> &lt;&lt; p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="6-3-2-数组参数"><a href="#6-3-2-数组参数" class="headerlink" title="6.3.2 数组参数"></a>6.3.2 数组参数</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sort</span><span class="params">(<span class="type">int</span>* arr, <span class="type">unsigned</span> count)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; count<span class="number">-1</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> tmp = arr[j];</span><br><span class="line">                arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                arr[j + <span class="number">1</span>] = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 阅读性更好，本质是一样的</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">unsigned</span> count)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; count - <span class="number">1</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> tmp = arr[j];</span><br><span class="line">                arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                arr[j + <span class="number">1</span>] = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多维数组</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sort</span><span class="params">(<span class="type">int</span> a[][<span class="number">2</span>], <span class="type">unsigned</span> count)</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">5</span>]&#123; <span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">4</span> &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> x : a) cout &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">sort</span>(a, <span class="number">5</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> x : a) cout &lt;&lt; x &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="6-3-3-不定量参数"><a href="#6-3-3-不定量参数" class="headerlink" title="6.3.3 不定量参数"></a>6.3.3 不定量参数</h5><blockquote><p><code>main</code> 函数的完全写法：</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argcount, <span class="type">char</span>* c_arg[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// argcount为int 或 unsigned </span></span><br><span class="line">    <span class="comment">// 第一个参数为可执行文件的路径和文件名，即默认1个</span></span><br><span class="line">    <span class="comment">// 指针数组 c_arg 的最后一个元素为 nullptr</span></span><br><span class="line">    <span class="comment">// 因为本身就是一个字符串，根据空格切分后将地址存放进c_arg</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;参数个数:&quot;</span> &lt;&lt; argcount &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; argcount; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;参数[&quot;</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">&quot;]=[&quot;</span> &lt;&lt; *c_arg[i] &lt;&lt; <span class="string">&quot;]&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// 或者利用指针数组 c_arg 的最后一个元素为 nullptr</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; c_arg[i]; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;参数[&quot;</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">&quot;]=[&quot;</span> &lt;&lt; *c_arg[i] &lt;&lt; <span class="string">&quot;]&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>另一种不定量参数：【需头文件<code>&lt;cstdarg&gt;</code>】</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdarg&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不定量参数的第一个参数：参数个数</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">average</span><span class="params">(<span class="type">int</span> count, ...)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//va_list arg; // 本质是一个char*,即作用同下</span></span><br><span class="line">    <span class="type">char</span>* arg;</span><br><span class="line">    <span class="built_in">va_start</span>(arg, count);<span class="comment">// 初始化arg，arg指向参数地址</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> sum&#123; <span class="number">0</span> &#125;, x&#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i&#123;&#125;; i &lt; count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x = <span class="built_in">va_arg</span>(arg, <span class="type">int</span>); <span class="comment">// 参数一：参数指针 参数二：类型</span></span><br><span class="line">        sum += x;</span><br><span class="line">        cout &lt;&lt; x &lt;&lt; endl;;</span><br><span class="line">    &#125;</span><br><span class="line">    sum /= count;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">va_end</span>(arg);<span class="comment">//释放</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argcount, <span class="type">char</span>* c_arg[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="built_in">average</span>(<span class="number">9</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;平均数：&quot;</span> &lt;&lt; x &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-4-值传递"><a href="#6-4-值传递" class="headerlink" title="6.4 值传递"></a>6.4 值传递</h4><blockquote><p>函数定义里小括号内称为形参，函数调用时传入的参数称为实参</p></blockquote><ul><li>所谓值传递，就是函数调用时实参将数值传入给形参</li><li>值传递时，<span style="background:#ff0">如果形参发生改变，并不会影响实参</span></li></ul><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> temp = num1;</span><br><span class="line">    num1 = num2;</span><br><span class="line">    num2 = temp;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//return ; 当函数声明时候，不需要返回值，可以不写return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">swap</span>(a, b);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;mian中的 a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;mian中的 b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>总结： 值传递时，形参是修改不了实参的【除非操作地址】</p></blockquote><h4 id="6-5-函数的声明"><a href="#6-5-函数的声明" class="headerlink" title="6.5 函数的声明"></a>6.5 函数的声明</h4><p><strong>作用：</strong> 告诉编译器函数名称及如何调用函数。函数的实际主体可以单独定义。</p><ul><li>函数的<strong>声明可以多次</strong>，但是函数的<strong>定义只能有一次</strong></li><li><strong>注意</strong>：函数在使用前，必须被声明或者定义</li></ul><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明可以多次，定义只能一次</span></span><br><span class="line"><span class="comment">//声明</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">max</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">max</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>;</span><br><span class="line"><span class="comment">//定义</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">max</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> a = <span class="number">100</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="built_in">max</span>(a, b) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-6-函数的分文件编写"><a href="#6-6-函数的分文件编写" class="headerlink" title="6.6 函数的分文件编写"></a>6.6 函数的分文件编写</h4><p><strong>作用：</strong>让代码结构更加清晰</p><p>函数分文件编写一般有4个步骤：</p><ol><li>创建后缀名为.h的头文件</li><li>创建后缀名为.cpp的源文件</li><li>在头文件中写函数的声明</li><li>在源文件中写函数的定义</li></ol><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//swap.h文件</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//实现两个数字交换的函数声明</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//swap.cpp文件</span></span><br><span class="line"><span class="comment">//注意！！</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;swap.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> temp = a;</span><br><span class="line">    a = b;</span><br><span class="line">    b = temp;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main函数文件</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;swap.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> a = <span class="number">100</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">200</span>;</span><br><span class="line">    <span class="built_in">swap</span>(a, b);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="6-7-函数返回：指针和引用"><a href="#6-7-函数返回：指针和引用" class="headerlink" title="6.7 函数返回：指针和引用"></a>6.7 函数返回：指针和引用</h4><p>注意：字符串赋值，如果需要二次处理，直接使用常量赋值的方法是不行的。需要重新分配内存空间，其中要注意返回值为局部变量的 “坑”！</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数：求字符串长度</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">clen</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i&#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; str[i]; i++);</span><br><span class="line">    <span class="keyword">return</span> ++i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标：使用该函数给c字符串赋值</span></span><br><span class="line"><span class="function"><span class="type">char</span>*  <span class="title">Cstr</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">clen</span>(str);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;len:&quot;</span> &lt;&lt; len &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//char strRt[0x20];</span></span><br><span class="line">    <span class="comment">//memcpy(strRt, str, len);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 此时存在的问题：strRt是【局部变量】，函数结束后，strRt的栈空间内存被回收</span></span><br><span class="line">    <span class="comment">//return strRt;</span></span><br><span class="line"></span><br><span class="line">    <span class="type">char</span>* strRt = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">0x20</span>]; <span class="comment">// 堆内存需要delete</span></span><br><span class="line">    <span class="built_in">memcpy</span>(strRt, str, len);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> strRt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argcount, <span class="type">char</span>* c_arg[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span>* str;</span><br><span class="line">    str = (<span class="type">char</span>*)<span class="string">&quot;你好&quot;</span>;<span class="comment">//将指针str强行指向常量的内存地址，并没有为str分配内存空间</span></span><br><span class="line">    <span class="comment">// str[0] = 0;// 错误：str指向常量的地址空间，没有修改的权限</span></span><br><span class="line">    cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 下面给str重新赋值</span></span><br><span class="line">    str = <span class="built_in">Cstr</span>(<span class="string">&quot;你好&quot;</span>);</span><br><span class="line">    cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意：结构体作为函数的返回值【不常用】，一般返回指针或引用</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数：求字符串长度</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">clen</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i&#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; str[i]; i++);</span><br><span class="line">    <span class="keyword">return</span> ++i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标：使用该函数给c字符串赋值</span></span><br><span class="line"><span class="function"><span class="type">char</span>* <span class="title">Cstr</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">clen</span>(str);</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span>* strRt = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">0x20</span>]; <span class="comment">// 堆内存需要delete</span></span><br><span class="line">    <span class="built_in">memcpy</span>(strRt, str, len);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> strRt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">Role</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span>* Name;</span><br><span class="line">    <span class="type">int</span> HP;</span><br><span class="line">    <span class="type">int</span> maxHP;</span><br><span class="line">    <span class="type">int</span> MP;</span><br><span class="line">    <span class="type">int</span> maxMP;</span><br><span class="line"></span><br><span class="line">&#125;*PROLE, ROLE;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回结构体，好理解，但性能太差</span></span><br><span class="line"><span class="function">ROLE <span class="title">createRole</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str, <span class="type">int</span> HP, <span class="type">int</span> MP)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Role rt&#123; <span class="built_in">Cstr</span>(str),HP,HP,MP,MP &#125;;</span><br><span class="line">    <span class="keyword">return</span> rt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 返回指针：注意不要返回局部变量</span></span><br><span class="line"><span class="function">PROLE <span class="title">PcreateRole</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str, <span class="type">int</span> HP, <span class="type">int</span> MP)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    PROLE rt = <span class="keyword">new</span> ROLE&#123; <span class="built_in">Cstr</span>(str),HP,HP,MP,MP &#125;;</span><br><span class="line">    <span class="keyword">return</span> rt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 返回引用【结构体的引用】</span></span><br><span class="line"><span class="function">ROLE&amp; <span class="title">PPcreateRole</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str, <span class="type">int</span> HP, <span class="type">int</span> MP)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    PROLE rt = <span class="keyword">new</span> ROLE&#123; <span class="built_in">Cstr</span>(str),HP,HP,MP,MP &#125;;</span><br><span class="line">    <span class="comment">// rt是指针，返回值是结构体的引用</span></span><br><span class="line">    <span class="keyword">return</span> *rt;<span class="comment">// 还原指针</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argcount, <span class="type">char</span>* c_arg[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ROLE role = <span class="built_in">createRole</span>(<span class="string">&quot;abc&quot;</span>, <span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">    cout &lt;&lt; role.Name &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; role.HP &lt;&lt; <span class="string">&quot;/&quot;</span> &lt;&lt; role.MP &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 实际上不会这么写，内存开销太大！</span></span><br><span class="line">    <span class="comment">//【create函数创建、返回的结构体，都会每次重新一一赋值给新的变量role】</span></span><br><span class="line">    <span class="comment">// </span></span><br><span class="line">    <span class="comment">// 避免方式1：返回指针</span></span><br><span class="line">    PROLE r1 = <span class="built_in">PcreateRole</span>(<span class="string">&quot;abc&quot;</span>, <span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">    cout &lt;&lt; r1-&gt;Name &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; r1-&gt;HP &lt;&lt; <span class="string">&quot;/&quot;</span> &lt;&lt; r1-&gt;MP &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 避免方式2：返回引用</span></span><br><span class="line">    ROLE&amp; r2 = <span class="built_in">PPcreateRole</span>(<span class="string">&quot;abc&quot;</span>, <span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">    cout &lt;&lt; r<span class="number">2.</span>Name &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; r<span class="number">2.</span>HP &lt;&lt; <span class="string">&quot;/&quot;</span> &lt;&lt; r<span class="number">2.</span>MP &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="7、指针"><a href="#7、指针" class="headerlink" title="7、指针"></a>7、指针</h3><h4 id="7-1-指针的基本概念"><a href="#7-1-指针的基本概念" class="headerlink" title="7.1 指针的基本概念"></a>7.1 指针的基本概念</h4><p><strong>指针的作用：</strong> 可以通过指针间接访问内存</p><ul><li>内存编号是从0开始记录的，一般用十六进制数字表示</li><li>可以利用指针变量保存地址</li></ul><h4 id="7-2-指针变量的定义和使用"><a href="#7-2-指针变量的定义和使用" class="headerlink" title="7.2 指针变量的定义和使用"></a>7.2 指针变量的定义和使用</h4><p>指针变量定义语法： <code>数据类型 * 变量名；</code></p><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1、指针的定义</span></span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>; <span class="comment">//定义整型变量a</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//指针定义语法： 数据类型 * 变量名 ;</span></span><br><span class="line">    <span class="type">int</span> * p;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//指针变量赋值</span></span><br><span class="line">    p = &amp;a; <span class="comment">//指针指向变量a的地址</span></span><br><span class="line">    cout &lt;&lt; &amp;a &lt;&lt; endl; <span class="comment">//打印数据a的地址</span></span><br><span class="line">    cout &lt;&lt; p &lt;&lt; endl;  <span class="comment">//打印指针变量p</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、指针的使用</span></span><br><span class="line">    <span class="comment">//通过*操作指针变量指向的内存</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*p = &quot;</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>指针变量和普通变量的区别</p><ul><li>普通变量存放的是数据，指针变量存放的是地址</li><li>指针变量可以通过” * “操作符，操作指针变量指向的内存空间，这个过程称为<strong>解引用</strong></li></ul><blockquote><p>总结1： 我们可以通过 &amp; 符号 获取变量的地址</p><p>总结2：利用指针可以记录地址</p><p>总结3：对指针变量解引用，可以操作指针指向的内存</p></blockquote><h4 id="7-3-指针所占内存空间"><a href="#7-3-指针所占内存空间" class="headerlink" title="7.3 指针所占内存空间"></a>7.3 指针所占内存空间</h4><p>提问：指针也是种数据类型，那么这种数据类型占用多少内存空间？</p><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> * p;</span><br><span class="line">    p = &amp;a; <span class="comment">//指针指向数据a的地址</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; *p &lt;&lt; endl; <span class="comment">//* 解引用</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(p) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">char</span> *) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">float</span> *) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">double</span> *) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>总结：所有指针类型在32位操作系统下是4个字节</p><p>在64位操作系统下是8个字节</p></blockquote><br><h4 id="7-4-空指针和野指针"><a href="#7-4-空指针和野指针" class="headerlink" title="7.4 空指针和野指针"></a>7.4 空指针和野指针</h4><h5 id="7-4-1-空指针"><a href="#7-4-1-空指针" class="headerlink" title="7.4.1 空指针"></a>7.4.1 空指针</h5><p><strong>空指针</strong>：指针变量指向内存中<strong>编号为0【NULL】</strong>的空间</p><p><strong>用途：</strong>初始化指针变量</p><p><strong>注意：</strong>空指针指向的内存是不可以访问的</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//指针变量p指向内存地址编号为0的空间</span></span><br><span class="line">    <span class="type">int</span> * p = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//访问空指针报错 </span></span><br><span class="line">    <span class="comment">//内存编号0 ~255为系统占用内存，不允许用户访问</span></span><br><span class="line">    cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="7-4-2-野指针"><a href="#7-4-2-野指针" class="headerlink" title="7.4.2 野指针"></a>7.4.2 野指针</h5><p><strong>野指针</strong>：指针变量指向非法的内存空间</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//指针变量p指向内存地址编号为0x1100的空间</span></span><br><span class="line">    <span class="type">int</span> * p = (<span class="type">int</span> *)<span class="number">0x1100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//访问野指针报错 </span></span><br><span class="line">    cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>总结：空指针和野指针都不是我们申请的空间，因此不要访问。</p></blockquote><h5 id="7-4-3-指针安全"><a href="#7-4-3-指针安全" class="headerlink" title="7.4.3 指针安全"></a>7.4.3 指针安全</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><br><h4 id="7-5-const修饰指针"><a href="#7-5-const修饰指针" class="headerlink" title="7.5 const修饰指针"></a>7.5 const修饰指针</h4><p><code>const</code>修饰指针有三种情况</p><ol><li><code>const</code>修饰指针 — 常量指针</li><li><code>const</code>修饰常量 — 指针常量</li><li><code>const</code>即修饰指针，又修饰常量</li></ol><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//const修饰的是指针，指针指向可以改，指针指向的值不可以更改【记：const修饰int】</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> * p1 = &amp;a; </span><br><span class="line">    p1 = &amp;b; <span class="comment">//正确</span></span><br><span class="line">    <span class="comment">//*p1 = 100;  报错</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">//const修饰的是常量，指针指向不可以改，指针指向的值可以更改【记：const修饰指针p2】</span></span><br><span class="line">    <span class="type">int</span> * <span class="type">const</span> p2 = &amp;a;</span><br><span class="line">    <span class="comment">//p2 = &amp;b; //错误</span></span><br><span class="line">    *p2 = <span class="number">100</span>; <span class="comment">//正确</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//const既修饰指针又修饰常量</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> * <span class="type">const</span> p3 = &amp;a;</span><br><span class="line">    <span class="comment">//p3 = &amp;b; //错误</span></span><br><span class="line">    <span class="comment">//*p3 = 100; //错误</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>技巧</strong>：看const右侧紧跟着的是指针还是常量, 是指针就是常量指针，是常量就是指针常量</p><ul><li>const修饰一个int类型的指针，即常量指针【既然是常量指针，故是常量，值不可改】</li><li>const直接修饰变量，即指针常量【既然是指针常量，那指针指向不可变】</li></ul><br><h4 id="7-6-指针的指针"><a href="#7-6-指针的指针" class="headerlink" title="7.6 指针的指针"></a>7.6 指针的指针</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a[]&#123; <span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span> &#125;;</span><br><span class="line">    <span class="type">int</span>* ptr&#123; &amp;a[<span class="number">0</span>] &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//指针的指针</span></span><br><span class="line">    <span class="type">int</span>** pptr = &amp;ptr; </span><br><span class="line">    cout &lt;&lt; *ptr &lt;&lt; <span class="string">&#x27;,&#x27;</span> &lt;&lt; ptr &lt;&lt; endl; </span><br><span class="line">    cout &lt;&lt; *pptr &lt;&lt; <span class="string">&#x27;,&#x27;</span> &lt;&lt; pptr &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//10,000000C3F8D7F9A8</span></span><br><span class="line">    <span class="comment">//000000C3F8D7F9A8, 000000C3F8D7F9D8</span></span><br><span class="line">    <span class="comment">// 注意：不存在 &amp;&amp;a[0]</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="7-7-指针和数组"><a href="#7-7-指针和数组" class="headerlink" title="7.7 指针和数组"></a>7.7 指针和数组</h4><p><strong>作用：</strong>利用指针访问数组中元素</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> arr[] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> * p = arr;  <span class="comment">//指向数组的指针</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;第一个元素： &quot;</span> &lt;&lt; arr[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;指针访问第一个元素： &quot;</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//利用指针遍历数组</span></span><br><span class="line">        cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">        p++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>小练习：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a[]&#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>&#125;;</span><br><span class="line"><span class="type">int</span> *ptr&#123;&amp;a[<span class="number">0</span>]&#125;;</span><br><span class="line"></span><br><span class="line">(*ptr)++  <span class="comment">// 11</span></span><br><span class="line">*ptr++   <span class="comment">// ++优先级大于*，故先ptr++，考虑到++，故为(*ptr)再ptr++</span></span><br></pre></td></tr></table></figure><p>ptr[5] 与 a[5] 原理一致，均是在基地址上进行偏移。</p></blockquote><p>注意：<code>sizeof(a)</code> 与 <code>sizeof(ptr)</code> 不同，前者是数组的大小，后者仅是指针的大小</p><br><h4 id="7-8-指针和函数"><a href="#7-8-指针和函数" class="headerlink" title="7.8 指针和函数"></a>7.8 指针和函数</h4><p><strong>作用：</strong>利用指针作函数参数，可以修改实参的值</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//值传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap1</span><span class="params">(<span class="type">int</span> a ,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> temp = a;</span><br><span class="line">    a = b; </span><br><span class="line">    b = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//地址传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap2</span><span class="params">(<span class="type">int</span> * p1, <span class="type">int</span> *p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> temp = *p1;</span><br><span class="line">    *p1 = *p2;</span><br><span class="line">    *p2 = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line">    <span class="built_in">swap1</span>(a, b); <span class="comment">// 值传递不会改变实参</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">swap2</span>(&amp;a, &amp;b); <span class="comment">//地址传递会改变实参</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>总结：如果不想修改实参，就用值传递，如果想修改实参，就用地址传递</p></blockquote><br><h4 id="7-9-指针的类型转换"><a href="#7-9-指针的类型转换" class="headerlink" title="7.9 指针的类型转换"></a>7.9 指针的类型转换</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> a&#123; <span class="number">101</span> &#125;; <span class="comment">// a是个常量</span></span><br><span class="line">    <span class="comment">// int* ptr&#123; &amp;a &#125;;</span></span><br><span class="line">    <span class="comment">// 错误原因：</span></span><br><span class="line">    <span class="type">int</span>* ptr = &#123; (<span class="type">int</span>*)&amp;a &#125;;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; *ptr &lt;&lt; <span class="string">&#x27;,&#x27;</span> &lt;&lt; ptr &lt;&lt; endl;<span class="comment">// 101,0000004F1F79F894</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改常量a</span></span><br><span class="line">    *ptr = <span class="number">200</span>;</span><br><span class="line">    cout &lt;&lt; *ptr &lt;&lt; <span class="string">&#x27;,&#x27;</span> &lt;&lt; ptr &lt;&lt; endl;<span class="comment">// 200, 0000004F1F79F894</span></span><br><span class="line">    cout &lt;&lt; a  &lt;&lt; endl; <span class="comment">// 101 ????????使用汇编解释</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上汇编代码：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>例子二：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> b[<span class="number">2</span>][<span class="number">3</span>]</span><br><span class="line">    &#123;</span><br><span class="line">        &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">        &#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//int* ptrb&#123; b &#125;;// 报错：二维数组的指针应该是一个【数组指针：用于处理数组问题】</span></span><br><span class="line">    <span class="type">int</span>* ptrb&#123; (<span class="type">int</span>*)b &#125;;<span class="comment">//强制转换的方法</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>* ptrbArray[<span class="number">3</span>];<span class="comment">// 这是【指针数组：3个int类型的指针】</span></span><br><span class="line">    <span class="built_in">int</span>(*p)[<span class="number">3</span>] &#123;b&#125;;<span class="comment">// 这是【数组指针：每个指针负责3个内存空间】</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; b[<span class="number">1</span>][<span class="number">2</span>] &lt;&lt; <span class="string">&#x27;,&#x27;</span> &lt;&lt; ptrb[<span class="number">5</span>]&lt;&lt;endl;</span><br><span class="line">    cout &lt;&lt; b[<span class="number">1</span>][<span class="number">2</span>] &lt;&lt; <span class="string">&#x27;,&#x27;</span> &lt;&lt; p[<span class="number">1</span>][<span class="number">2</span>] &lt;&lt;<span class="string">&quot;, sizeof(p) = &quot;</span> &lt;&lt;<span class="built_in">sizeof</span>(p) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; p &lt;&lt; <span class="string">&#x27;,&#x27;</span> &lt;&lt; p<span class="number">+1</span> &lt;&lt; endl; <span class="comment">// 相差12</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="7-10-智能指针"><a href="#7-10-智能指针" class="headerlink" title="7.10 智能指针"></a>7.10 智能指针</h4><p>指针最大的问题是安全问题，比如多次释放、野指针、悬挂指针等。而智能指针是指针的二次封装类，为解决上述安全问题。</p><h5 id="7-10-1-智能指针的概念及原理"><a href="#7-10-1-智能指针的概念及原理" class="headerlink" title="7.10.1 智能指针的概念及原理"></a>7.10.1 智能指针的概念及原理</h5><p>智能指针<code>RAII</code>【<code>Resource Acquisition Is Initialization</code>】，是一种利用对象的生命周期来管理资源的技术。</p><p>如果我们采用传统的<code>new</code>/<code>delete</code>来申请和释放资源，如果忘记调用<code>delete</code>，或者在调用<code>delete</code>之前程序抛出异常，都会导致内存泄漏问题。如代码1.1中，<code>Func</code>函数中的<code>new p2</code>和<code>Div</code>都可能抛异常，导致后面的<code>delete</code>没有执行从而引发内存泄漏，采用智能指针对资源进行管理，能够杜绝这类问题。</p><blockquote><p><strong>代码1.1：</strong>因异常引发的内存泄漏</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">Div</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">&quot;除0错误&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> a / b;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span>* p1 = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">5</span>];</span><br><span class="line">    <span class="type">int</span>* p2 = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">5</span>];</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//这里Div函数会抛异常，main函数会捕获异常，delete[]没有执行，引发内存泄漏</span></span><br><span class="line">    <span class="type">int</span> ret = <span class="built_in">Div</span>(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">delete</span>[] p1;</span><br><span class="line">    <span class="keyword">delete</span>[] p2;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="built_in">Func</span>();</span><br><span class="line">    &#125;<span class="built_in">catch</span> (std::exception&amp; e)	&#123;</span><br><span class="line">        std::cout &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;<span class="built_in">catch</span> (...)&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;未知错误&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>智能指针是一个类，在对象构造时调用智能指针的构造函数获取资源，在对象生命周期内，保证资源不被释放，在对象生命周期结束时，编译器自动调用析构函数来释放资源。</p><p>这就相当于，将管理资源的责任移交给了智能指针对象，这样即使程序抛出异常也不存在内存泄漏，因为捕获异常往往跳出函数体，执行流会离开对象的作用域，对象生命周期结束，编译器自动调用析构函数释放了资源。</p><p>🔺采用智能指针管理资源，有如下优点：</p><ul><li>将资源管理的责任转移给智能指针对象，不用显示地释放资源，杜绝了异常安全问题。</li><li>保证对象管理的资源在其生命周期内有效。</li></ul><blockquote><p><strong>代码1.2</strong>中，定义了一种简易的智能指针<code>SmartPtr</code>，在其析构函数中会对资源进行释放。因为申请的资源可能是通过<code>new T</code>、<code>new T[n]</code>、<code>malloc(...)</code>这几种方法的任意之一来申请的，每种方式申请的资源需要不同的关键字/函数来释放资源，否则程序可能会崩溃。</p></blockquote><p>因此，需要一个模板参数<code>Del</code>，这个模板参数用于接收仿函数，以匹配不同的资源释放方式。【我们默认采用<code>delete</code>的方式释放资源，C++标准库中提供的智能指针，如果不显示给定仿函数来定义释放资源的方式，也是默认<code>delete</code>释放资源】。</p><blockquote><p><strong>代码1.2：</strong>智能指针的简易实现 – <code>SmartPtr</code></p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Delete</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(T* ptr)</span> </span>&#123; <span class="keyword">delete</span> ptr;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">DeleteArray</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(T* ptr)</span> </span>&#123; <span class="keyword">delete</span>[] ptr; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Free</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(T* ptr)</span> </span>&#123; <span class="built_in">free</span>(ptr); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>, <span class="keyword">class</span> <span class="title class_">Del</span> = Delete&lt;T&gt;&gt;</span><br><span class="line"><span class="keyword">class</span> SmartPtr</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">SmartPtr</span>(T* ptr = <span class="literal">nullptr</span>)  <span class="comment">//构造函数</span></span><br><span class="line">        : _ptr(ptr)</span><br><span class="line">    &#123; &#125;</span><br><span class="line"> </span><br><span class="line">    ~<span class="built_in">SmartPtr</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        Del del;</span><br><span class="line">        <span class="built_in">del</span>(_ptr);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T* _ptr;  <span class="comment">//管理的资源</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><h5 id="7-10-2-智能指针的拷贝问题"><a href="#7-10-2-智能指针的拷贝问题" class="headerlink" title="7.10.2 智能指针的拷贝问题"></a>7.10.2 智能指针的拷贝问题</h5><p>我们要求智能指针具有一般的指针行为。因此，我们也就需要智能指针支持拷贝。但是，智能指针中的成员涉及到执行动态申请资源的指针，按照一般要求，应当进行深拷贝。</p><p>但是如果我们进行深拷贝，就会让两个智能指针指向不同的空间，但是我们所希望的是两个指针共同管理一块资源，因此我们就是要浅拷贝（值拷贝）。</p><p>但是值拷贝会存在对同一块空间多次释放的问题，对此，C++标准库中的智能指针<code>auto_ptr</code>和<code>shared_ptr</code>分别采用了管理权转移和引用计数的方法来解决问题，但一般会通过引用计数解决多次释放的问题【】。</p><p>智能指针拷贝问题总结：</p><ul><li>即使涉及到动态申请内存，智能指针的拷贝也不应为深拷贝，应当是浅拷贝。</li><li>采用管理权转移【<code>auto_ptr</code>】或引用计数【<code>shared_ptr</code>】来解决同一块空间多次释放的问题。</li><li>一般都使用引用计数来解决多次释放问题，<code>auto_ptr</code>大部分情况下不使用。</li></ul><p><img src="./cpp7-1.PNG"></p><br><h5 id="7-10-3-auto-ptr"><a href="#7-10-3-auto-ptr" class="headerlink" title="7.10.3 auto_ptr"></a>7.10.3 <code>auto_ptr</code></h5><p><code>auto_ptr</code>采用管理权转移的方法进行赋值和拷贝构造。</p><ul><li>假设原先有一个<code>auto_ptr</code>对象<code>p1</code>，要通过<code>p1</code>构造<code>p2</code>，当拷贝构造完成后，用于拷贝构造传参的对象<code>p1</code>中管理资源的指针会被更改为<code>nullptr</code>，赋值也一样。</li><li>假设<code>p2=p1</code>，<code>p1</code>中资源的管理权会转移给<code>p2</code>，<code>p2</code>原本的资源会被释放。</li></ul><p>采用管理权转移的方法进行智能指针拷贝是一种极不负责任的行为，<code>auto_ptr</code>已经被很多公司明令禁止使用，一般项目中也极少使用<code>auto_ptr</code>。</p><p><img src="./cpp7-2.PNG"></p><br><h5 id="7-10-4-std-unique-ptr"><a href="#7-10-4-std-unique-ptr" class="headerlink" title="7.10.4 std::unique_ptr"></a>7.10.4 std::unique_ptr</h5><p>unique直接将拷贝构造和赋值禁止，也就不存在浅拷贝的多次释放同一块空间的问题。</p><p><strong>语法：</strong><code>std::unique_ptr &lt;类型&gt; 变量名&#123;&#125;；</code></p><p>示例一：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span>* a = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">5</span>];</span><br><span class="line">    unique_ptr&lt;<span class="type">int</span>&gt; intPtr1&#123; <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">5</span>)&#125;;</span><br><span class="line">    unique_ptr&lt;<span class="type">int</span>[]&gt; intPtr2&#123; <span class="keyword">new</span> <span class="type">int</span>[<span class="number">5</span>] &#123;<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>&#125; &#125;;</span><br><span class="line"></span><br><span class="line">    *intPtr1 = <span class="number">500</span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; intPtr1 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; *intPtr1&lt;&lt;endl;</span><br><span class="line">    cout &lt;&lt; intPtr2 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; intPtr2[<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 何为唯一指针？</span></span><br><span class="line">    unique_ptr&lt;<span class="type">int</span>&gt; intPtr3&#123;&#125;;</span><br><span class="line">    <span class="comment">//intPtr3 = intPtr1; // 报错：不允许出现野指针</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// c++14之后：下面 的写法等同于 intPtr1的初始化</span></span><br><span class="line">    unique_ptr&lt;<span class="type">int</span>[]&gt; intPtr4&#123; std::<span class="built_in">make_unique</span>&lt;<span class="type">int</span>[]&gt;(<span class="number">5</span>)&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取一个普通指针</span></span><br><span class="line">    <span class="type">int</span>* b = intPtr<span class="number">1.</span><span class="built_in">get</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 不能复制，但提供转移的功能 std::move(ptr)</span></span><br><span class="line">    intPtr3 = std::<span class="built_in">move</span>(intPtr1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回智能指针，并将其设置为nullptr，但不会释放占用的空间</span></span><br><span class="line">    <span class="type">int</span>* p = intPtr<span class="number">1.</span><span class="built_in">release</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 释放内存，并将其设置为nullptr</span></span><br><span class="line">    intPtr<span class="number">1.</span><span class="built_in">reset</span>();</span><br><span class="line">    intPtr<span class="number">2.</span><span class="built_in">reset</span>();</span><br><span class="line">    intPtr<span class="number">3.</span><span class="built_in">reset</span>();</span><br><span class="line">    intPtr<span class="number">4.</span><span class="built_in">reset</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>示例二：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> zhang</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">unique_ptr</span></span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="comment">//构造函数</span></span><br><span class="line">        <span class="built_in">unique_ptr</span>(T* ptr = <span class="literal">nullptr</span>)</span><br><span class="line">            : _ptr(ptr)</span><br><span class="line">        &#123; &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//使用delete关键字强行禁止拷贝构造函数和赋值函数的生成</span></span><br><span class="line">        <span class="built_in">unique_ptr</span>(<span class="type">const</span> unique_ptr&lt;T&gt;&amp; up) = <span class="keyword">delete</span>;</span><br><span class="line">        unique_ptr&lt;T&gt;&amp; <span class="keyword">operator</span>=(<span class="type">const</span> unique_ptr&lt;T&gt;&amp; up) = <span class="keyword">delete</span>;</span><br><span class="line"> </span><br><span class="line">        T&amp; <span class="keyword">operator</span>*()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> *_ptr;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        T* <span class="keyword">operator</span>-&gt;()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> _ptr;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//析构函数</span></span><br><span class="line">        ~<span class="built_in">unique_ptr</span>()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">delete</span> _ptr;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        T* _ptr;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="7-10-5-std-shared-ptr"><a href="#7-10-5-std-shared-ptr" class="headerlink" title="7.10.5 std::shared_ptr"></a>7.10.5 <code>std::shared_ptr</code></h5><p>该智能指针是C++11标准库中新纳入的智能指针，它通过引用计数的方法，较好的解决了拷贝和赋值的问题，是实际项目中最常用的智能指针。</p><p>共享指针可以有多个共享指针指向同一个地址，只有当最后一个共享指针被释放时，才会释放其所占用的内存空间【<code>std::shared_ptr</code> 会记录当前地址有多少个智能指针调用】。</p><p><strong>语法：</strong><code>std::shared_ptr &lt;类型&gt; 变量名&#123;&#125;；</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 举例</span></span><br><span class="line">std::shared_ptr&lt;<span class="type">int</span>&gt; ptrA&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//make_shared不支持数组，故使用 `new int[]`，或者 `boost`</span></span><br><span class="line">std::shared_ptr&lt;<span class="type">int</span>&gt; ptrB&#123;std::<span class="built_in">make_shared</span>&lt;<span class="type">int</span>&gt;(<span class="number">5</span>)&#125;;</span><br></pre></td></tr></table></figure><p><strong>常用接口函数：</strong></p><table><thead><tr><th>接口函数</th><th>功能</th></tr></thead><tbody><tr><td><code>shared_ptr(T* ptr = nullptr, Del del = Delete&lt;T&gt;())</code></td><td>构造函数，del为定制删除器，是一个仿函数对象，用于不同情况下的资源释放操作</td></tr><tr><td><code>shared_ptr(shared_ptr&lt;T&gt;&amp; sp)</code></td><td>拷贝构造函数</td></tr><tr><td><code>shared_ptr&lt;T&gt;&amp; operator=(shared_ptr&lt;T&gt;&amp; sp)</code></td><td>赋值运算符重载函数</td></tr><tr><td><code>T&amp; operator*()</code></td><td>解引用操作符重载函数</td></tr><tr><td><code>T* operator-&gt;()</code></td><td>成员访问操作符重载函数</td></tr><tr><td><code>T* get()</code></td><td>获取<code>shared_ptr</code>内部管理资源的指针</td></tr><tr><td><code>long int use_count()</code></td><td>获取引用计数（当前智能指针管理的资源被多少智能指针共同管理）</td></tr><tr><td><code>bool unique()</code></td><td>判断当前智能指针管理的资源是否只有它本身在管理（引用计数是否为1）【C++17已被移除】</td></tr><tr><td><code>void std::shared_ptr.reset();</code></td><td>将共享指针设置为nullptr，且若是最后一个拥有该指针的对象，将会释放内存</td></tr></tbody></table><br><p><strong><code>shared_ptr</code>的拷贝构造和赋值问题</strong></p><p><code>shared</code>内部有一个成员变量<code>long int* _pcount</code>，它指向一块存储引用计数的空间。</p><ul><li>当进行拷贝构造时，引用计数+1，即：<code>++(*_pcount)</code>。</li><li>进行赋值操作<code>(sp2 = sp1)</code>时，首先应当检查自赋值。<ul><li>如果是自赋值，直接返回 <code>*this</code> 即可。</li><li>如果不是自赋值，那么首先将<code>sp2</code>的引用计数<code>-1</code>，如果sp2的引用计数<code>-1</code>后变为了0，那么就释放<code>sp2</code>的资源，然后赋予<code>sp2</code>管理<code>sp1</code>管理的资源的权限，<code>sp2</code>和<code>sp1</code>共用一个引用计数，引用计数+1。</li></ul></li><li>调用析构函数时，先让引用计数<code>-1</code>，如果此时引用计数变为0，就释放资源。</li></ul><p><img src="./cpp7-3.PNG"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模拟实现</span></span><br><span class="line"><span class="keyword">namespace</span> zhang</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>, <span class="keyword">class</span> <span class="title class_">Del</span> = Delete&lt;T&gt;&gt;</span><br><span class="line">    <span class="keyword">class</span> shared_ptr</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="comment">//构造函数</span></span><br><span class="line">        <span class="built_in">shared_ptr</span>(T* ptr = <span class="literal">nullptr</span>)</span><br><span class="line">            : _ptr(ptr)</span><br><span class="line">            , _pcount(<span class="keyword">new</span> <span class="type">long</span> <span class="built_in">int</span>(<span class="number">1</span>))</span><br><span class="line">        &#123; &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//拷贝构造函数</span></span><br><span class="line">        <span class="built_in">shared_ptr</span>(shared_ptr&lt;T&gt;&amp; sp)</span><br><span class="line">            : _ptr(sp._ptr)</span><br><span class="line">            , _pcount(sp._pcount)</span><br><span class="line">        &#123;</span><br><span class="line">            ++(*_pcount);  <span class="comment">//引用计数+1</span></span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//赋值函数</span></span><br><span class="line">        shared_ptr&lt;T&gt;&amp; <span class="keyword">operator</span>=(shared_ptr&lt;T&gt;&amp; sp)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (_ptr == sp._ptr)  <span class="comment">//自赋值检查</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            <span class="comment">//this的引用计数-1，并判断是否需要释放资源</span></span><br><span class="line">            <span class="keyword">if</span> (--(*_pcount) == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Del del;</span><br><span class="line">                <span class="built_in">del</span>(_ptr);</span><br><span class="line">                <span class="keyword">delete</span> _pcount;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            _ptr = sp._ptr;</span><br><span class="line">            _pcount = sp._pcount;</span><br><span class="line">            ++(*_pcount);</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//指针获取函数</span></span><br><span class="line">        <span class="function">T* <span class="title">get</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _ptr;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//引用计数获取函数</span></span><br><span class="line">        <span class="function"><span class="type">long</span> <span class="type">int</span> <span class="title">use_count</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> *_pcount;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        T&amp; <span class="keyword">operator</span>*()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> *_ptr;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        T* <span class="keyword">operator</span>-&gt;()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> _ptr;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">unique</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> *_pcount == <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//析构函数</span></span><br><span class="line">        ~<span class="built_in">shared_ptr</span>()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (--(*_pcount) == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Del del;</span><br><span class="line">                <span class="built_in">del</span>(_ptr);</span><br><span class="line">                <span class="keyword">delete</span> _pcount;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        T* _ptr;   <span class="comment">//指向动态申请空间的指针</span></span><br><span class="line">        <span class="type">long</span> <span class="type">int</span>* _pcount;   <span class="comment">//引用计数</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="7-10-6-shared-ptr的循环引用问题"><a href="#7-10-6-shared-ptr的循环引用问题" class="headerlink" title="7.10.6 shared_ptr的循环引用问题"></a>7.10.6 shared_ptr的循环引用问题</h5><p>在绝大部分情况下，<code>shared_ptr</code>能够解决智能指针赋值造成的多次析构问题，也不会引发内存泄漏。</p><p>但是，代码<code>4.1</code>展现了一种特殊情况，定义一个<code>Node</code>节点，其中包含两个<code>shared_ptr</code>成员：<code>_prev</code>和<code>_next</code>。</p><p>在主函数中实例化出两个<code>shared_ptr&lt;Node&gt;</code>对象<code>n1</code>和<code>n2</code>，<code>n1</code>的<code>_next</code>指向<code>n2</code>，<code>n2</code>的<code>_prev</code>指向<code>n1</code>，<code>n1</code>和<code>n2</code>相互指向对方，这样就属于循环引用，会造成n1和n2的资源释放失败，引发内存泄漏问题。</p><blockquote><p>代码4.1：循环引用</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> _val;</span><br><span class="line">    std::shared_ptr&lt;Node&gt; _prev;</span><br><span class="line">    std::shared_ptr&lt;Node&gt; _next;</span><br><span class="line"> </span><br><span class="line">    ~<span class="built_in">Node</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;~Node()&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::shared_ptr&lt;Node&gt; <span class="title">n1</span><span class="params">(<span class="keyword">new</span> Node)</span></span>;<span class="comment">//n1指向Node1</span></span><br><span class="line">    <span class="function">std::shared_ptr&lt;Node&gt; <span class="title">n2</span><span class="params">(<span class="keyword">new</span> Node)</span></span>;<span class="comment">//n2指向Node2</span></span><br><span class="line"> </span><br><span class="line">    n1-&gt;_next = n2;	<span class="comment">//Node1的下一个节点为Node2</span></span><br><span class="line">    n2-&gt;_prev = n1;	<span class="comment">//Node2的上一个节点为Node1</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在代码<code>4.1</code>中，循环引用的成因如下：</p><ul><li>构造对象<code>n1</code>和<code>n2</code>，引用计数为1，然后<code>n1-&gt;_next = n2</code>、<code>n2-&gt;_prev = n1</code>后，引用计数变为2。</li><li>先后由<code>n2</code>和<code>n1</code>调用析构函数，引用计数变为1。</li><li>此时，<code>n1</code>和<code>n2</code>的资源还都没有释放，<code>n1</code>的<code>_next</code>依旧指向<code>n2</code>，<code>n2</code>的<code>_prev</code>依旧指向<code>n1</code>。</li><li><code>n1</code>释放，就需要<code>n2</code>的<code>_prev</code>成员释放，<code>n2</code>释放，就需要<code>n1</code>的<code>_next</code>成员释放。</li><li>【但是，只有对象本身析构，它的成员才会析构，因此n1和n2彼此制约对方的析构，最终n1和n2的资源都无法释放，造成了内存泄漏】。</li></ul><p><img src="./cpp7-4.PNG"></p><br><p>为了避免循环引用，可以把<code>Node</code>节点中的<code>_next</code>和<code>_prev</code>成员变量的类型改为<code>weak_ptr&lt;Node&gt;</code>。</p><p><code>weak_ptr</code>是C++标准库中的比较特殊的一个智能指针，它允许使用<code>shared_ptr</code>对象来构造<code>weak_ptr</code>对象，但是，<code>weak_ptr</code>不增加引用计数，不参与资源的申请和释放，从严格意义上讲，<code>weak_ptr</code>不算是智能指针。</p><blockquote><p>代码4.2：使用weak_ptr避免引用计数</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> _val;</span><br><span class="line">    std::weak_ptr&lt;Node&gt; _prev;</span><br><span class="line">    std::weak_ptr&lt;Node&gt; _next;</span><br><span class="line"> </span><br><span class="line">    ~<span class="built_in">Node</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;~Node()&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::shared_ptr&lt;Node&gt; <span class="title">n1</span><span class="params">(<span class="keyword">new</span> Node)</span></span>;</span><br><span class="line">    <span class="function">std::shared_ptr&lt;Node&gt; <span class="title">n2</span><span class="params">(<span class="keyword">new</span> Node)</span></span>;</span><br><span class="line"> </span><br><span class="line">    n1-&gt;_next = n2;<span class="comment">//使用shared_ptr对象来构造weak_ptr对象</span></span><br><span class="line">    n2-&gt;_prev = n1;<span class="comment">//此时n1/n2的引用计数为1</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="7-10-7-std-weak-ptr"><a href="#7-10-7-std-weak-ptr" class="headerlink" title="7.10.7 std::weak_ptr"></a>7.10.7 <code>std::weak_ptr</code></h5><p><code>weak_ptr</code>不参与资源的管理和释放，可以使用<code>shared_ptr</code>对象来构造<code>weak_ptr</code>对象。</p><ul><li>但是，不能直接使用指针来构造<code>weak_ptr</code>对象</li><li>在weak_ptr中，也没有<code>operator*</code>函数和<code>operator-&gt;</code>成员函数，不具有一般指针的行为。</li><li><code>weak_ptr</code>在进行拷贝构造和赋值时，不增加引用计数，由于<code>weak_ptr</code>不参与资源管理，也不需要显示定义析构函数来释放资源。</li></ul><p>因此，<code>weak_ptr</code>严格意义上并不是智能指针，<code>weak_ptr</code>的出现，就是为了解决<code>shared_ptr</code>的循环引用问题。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">weak_ptr</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//默认构造函数</span></span><br><span class="line">    <span class="built_in">weak_ptr</span>()</span><br><span class="line">        : _ptr(<span class="literal">nullptr</span>)</span><br><span class="line">    &#123; &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//拷贝构造函数</span></span><br><span class="line">    <span class="built_in">weak_ptr</span>(weak_ptr&lt;T&gt;&amp; wp)</span><br><span class="line">        : _ptr(wp._ptr)</span><br><span class="line">    &#123; &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//采用shared_ptr构造</span></span><br><span class="line">    <span class="built_in">weak_ptr</span>(shared_ptr&lt;T&gt;&amp; sp)</span><br><span class="line">        : _ptr(sp.<span class="built_in">get</span>())</span><br><span class="line">    &#123; &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//赋值函数</span></span><br><span class="line">    weak_ptr&lt;T&gt;&amp; <span class="keyword">operator</span>=(weak_ptr&lt;T&gt;&amp; wp)</span><br><span class="line">    &#123;</span><br><span class="line">        _ptr = wp._ptr;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//通过shared_ptr对象赋值</span></span><br><span class="line">    weak_ptr&lt;T&gt;&amp; <span class="keyword">operator</span>=(shared_ptr&lt;T&gt;&amp; sp)</span><br><span class="line">    &#123;</span><br><span class="line">        _ptr = sp.<span class="built_in">get</span>();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T* _ptr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><h5 id="7-1-8-总结"><a href="#7-1-8-总结" class="headerlink" title="7.1.8 总结"></a>7.1.8 总结</h5><ul><li>智能指针是用来对资源进行管理的类，在对象创建时动态申请内存资源，在对象生命周期结束时由编译器自动调用析构函数完成资源的释放，智能指针除了用来管理资源外，还应当具有指针的一般行为（<code>operator*</code>函数和<code>operator-&gt;</code>函数）。</li><li>使用智能指针，相当于把资源管理的责任转交给智能指针对象。这样能够有效避免因为忘记<code>delete</code>或者程序抛出异常而引起的内存泄漏。</li><li>智能指针应支持浅拷贝，但是浅拷贝存在同一块空间被多次释放的问题，为此，C++标准库中的三种智能指针<code>auto_ptr</code>、<code>unique_ptr</code>和<code>shared_ptr</code>分别采用了不同的方法来解决这一问题。<ul><li><code>auto_ptr</code>支持拷贝的方式是进行管理权转移，这是一种不负责任的处理方式，<code>auto_ptr</code>因此被许多公司禁止使用。</li><li><code>unique_ptr</code>直接强行禁止拷贝构造和赋值。</li><li><code>shared_ptr</code>通过引用计数的方式来进行浅拷贝，当引用计数为0时析构函数才释放资源，这样既支持了浅拷贝，也保证一块空间仅被析构一次。但是<code>shared_ptr</code>存在循环引用这一隐患，会造成内存泄漏。</li><li>使用<code>weak_ptr</code>可以避免<code>shared_ptr</code>的循环引用问题，<code>weak_ptr</code>可以通<code>shared_ptr</code>对象来构造而不增加引用计数，<code>weak_ptr</code>不参与资源的管理，不支持<code>operator*</code>和<code>operator-&gt;</code>。</li></ul></li></ul><br><h3 id="8、结构体"><a href="#8、结构体" class="headerlink" title="8、结构体"></a>8、结构体</h3><h4 id="8-1-结构体基本概念"><a href="#8-1-结构体基本概念" class="headerlink" title="8.1 结构体基本概念"></a>8.1 结构体基本概念</h4><p>结构体属于用户<span style="background:#ff0">自定义的数据类型</span>，允许用户存储不同的数据类型</p><blockquote><p>在汇编中，结构体的定义是不存在对应的汇编代码，该定义是给编译器看的，不会创建在内存中。</p></blockquote><h4 id="8-2-结构体定义和使用"><a href="#8-2-结构体定义和使用" class="headerlink" title="8.2 结构体定义和使用"></a>8.2 结构体定义和使用</h4><p><strong>语法：</strong><code>struct 结构体名 &#123; 结构体成员列表 &#125;；</code></p><p>通过结构体创建变量的方式有三种：</p><ul><li>struct 结构体名 变量名</li><li>struct 结构体名 变量名 = { 成员1值 ， 成员2值…}</li><li>定义结构体时顺便创建变量</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结构体定义</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//成员列表</span></span><br><span class="line">    string name;  <span class="comment">//姓名</span></span><br><span class="line">    <span class="type">int</span> age;      <span class="comment">//年龄</span></span><br><span class="line">    <span class="type">int</span> score;    <span class="comment">//分数</span></span><br><span class="line">&#125;stu3; <span class="comment">//结构体变量创建方式3 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//结构体变量创建方式1</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">student</span> stu1; <span class="comment">//struct 关键字可以省略</span></span><br><span class="line"></span><br><span class="line">    stu<span class="number">1.</span>name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line">    stu<span class="number">1.</span>age = <span class="number">18</span>;</span><br><span class="line">    stu<span class="number">1.</span>score = <span class="number">100</span>;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; stu<span class="number">1.</span>name &lt;&lt; <span class="string">&quot; 年龄：&quot;</span> &lt;&lt; stu<span class="number">1.</span>age  &lt;&lt; <span class="string">&quot; 分数：&quot;</span> &lt;&lt; stu<span class="number">1.</span>score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//结构体变量创建方式2</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">student</span> stu2 = &#123; <span class="string">&quot;李四&quot;</span>,<span class="number">19</span>,<span class="number">60</span> &#125;;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; stu<span class="number">2.</span>name &lt;&lt; <span class="string">&quot; 年龄：&quot;</span> &lt;&lt; stu<span class="number">2.</span>age  &lt;&lt; <span class="string">&quot; 分数：&quot;</span> &lt;&lt; stu<span class="number">2.</span>score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    stu<span class="number">3.</span>name = <span class="string">&quot;王五&quot;</span>;</span><br><span class="line">    stu<span class="number">3.</span>age = <span class="number">18</span>;</span><br><span class="line">    stu<span class="number">3.</span>score = <span class="number">80</span>;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; stu<span class="number">3.</span>name &lt;&lt; <span class="string">&quot; 年龄：&quot;</span> &lt;&lt; stu<span class="number">3.</span>age  &lt;&lt; <span class="string">&quot; 分数：&quot;</span> &lt;&lt; stu<span class="number">3.</span>score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>总结1：定义结构体时的关键字是struct，不可省略</p><p>总结2：创建结构体变量时，关键字struct可以省略</p><p>总结3：结构体变量利用操作符 ‘’.’’ 访问成员</p></blockquote><h4 id="8-3-结构体数组"><a href="#8-3-结构体数组" class="headerlink" title="8.3 结构体数组"></a>8.3 结构体数组</h4><p><strong>作用：</strong>将自定义的结构体放入到数组中方便维护</p><p><strong>语法：</strong><code>struct 结构体名 数组名[元素个数] = &#123; &#123;&#125; , &#123;&#125; , ... &#123;&#125; &#125;</code></p><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结构体定义</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//成员列表</span></span><br><span class="line">    string name;  <span class="comment">//姓名</span></span><br><span class="line">    <span class="type">int</span> age;      <span class="comment">//年龄</span></span><br><span class="line">    <span class="type">int</span> score;    <span class="comment">//分数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//结构体数组</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">student</span> arr[<span class="number">3</span>]=</span><br><span class="line">    &#123;</span><br><span class="line">        &#123;<span class="string">&quot;张三&quot;</span>,<span class="number">18</span>,<span class="number">80</span> &#125;,</span><br><span class="line">        &#123;<span class="string">&quot;李四&quot;</span>,<span class="number">19</span>,<span class="number">60</span> &#125;,</span><br><span class="line">        &#123;<span class="string">&quot;王五&quot;</span>,<span class="number">20</span>,<span class="number">70</span> &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; arr[i].name &lt;&lt; <span class="string">&quot; 年龄：&quot;</span> &lt;&lt; arr[i].age &lt;&lt; <span class="string">&quot; 分数：&quot;</span> &lt;&lt; arr[i].score &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="8-4-结构体指针"><a href="#8-4-结构体指针" class="headerlink" title="8.4 结构体指针"></a>8.4 结构体指针</h4><p><strong>作用：</strong>通过指针访问结构体中的成员</p><ul><li>利用操作符 <code>-&gt;</code>可以通过结构体指针访问结构体属性</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结构体定义</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//成员列表</span></span><br><span class="line">    string name;  <span class="comment">//姓名</span></span><br><span class="line">    <span class="type">int</span> age;      <span class="comment">//年龄</span></span><br><span class="line">    <span class="type">int</span> score;    <span class="comment">//分数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">student</span> stu = &#123; <span class="string">&quot;张三&quot;</span>,<span class="number">18</span>,<span class="number">100</span>, &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">student</span> * p = &amp;stu;</span><br><span class="line">    </span><br><span class="line">    p-&gt;score = <span class="number">80</span>; <span class="comment">//指针通过 -&gt; 操作符可以访问成员</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; p-&gt;name &lt;&lt; <span class="string">&quot; 年龄：&quot;</span> &lt;&lt; p-&gt;age &lt;&lt; <span class="string">&quot; 分数：&quot;</span> &lt;&lt; p-&gt;score &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>总结：结构体指针可以通过 -&gt; 操作符 来访问结构体中的成员</p></blockquote><h4 id="8-5-结构体嵌套结构体"><a href="#8-5-结构体嵌套结构体" class="headerlink" title="8.5 结构体嵌套结构体"></a>8.5 结构体嵌套结构体</h4><p><strong>作用：</strong> 结构体中的成员可以是另一个结构体</p><p><strong>例如：</strong>每个老师辅导一个学员，一个老师的结构体中，记录一个学生的结构体</p><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学生结构体定义</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//成员列表</span></span><br><span class="line">    string name;  <span class="comment">//姓名</span></span><br><span class="line">    <span class="type">int</span> age;      <span class="comment">//年龄</span></span><br><span class="line">    <span class="type">int</span> score;    <span class="comment">//分数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//教师结构体定义</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">teacher</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//成员列表</span></span><br><span class="line">    <span class="type">int</span> id; <span class="comment">//职工编号</span></span><br><span class="line">    string name;  <span class="comment">//教师姓名</span></span><br><span class="line">    <span class="type">int</span> age;   <span class="comment">//教师年龄</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">student</span> stu; <span class="comment">//子结构体 学生</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">teacher</span> t1;</span><br><span class="line">    t<span class="number">1.</span>id = <span class="number">10000</span>;</span><br><span class="line">    t<span class="number">1.</span>name = <span class="string">&quot;老王&quot;</span>;</span><br><span class="line">    t<span class="number">1.</span>age = <span class="number">40</span>;</span><br><span class="line"></span><br><span class="line">    t<span class="number">1.</span>stu.name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line">    t<span class="number">1.</span>stu.age = <span class="number">18</span>;</span><br><span class="line">    t<span class="number">1.</span>stu.score = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;教师 职工编号： &quot;</span> &lt;&lt; t<span class="number">1.</span>id &lt;&lt; <span class="string">&quot; 姓名： &quot;</span> &lt;&lt; t<span class="number">1.</span>name &lt;&lt; <span class="string">&quot; 年龄： &quot;</span> &lt;&lt; t<span class="number">1.</span>age &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;辅导学员 姓名： &quot;</span> &lt;&lt; t<span class="number">1.</span>stu.name &lt;&lt; <span class="string">&quot; 年龄：&quot;</span> &lt;&lt; t<span class="number">1.</span>stu.age &lt;&lt; <span class="string">&quot; 考试分数： &quot;</span> &lt;&lt; t<span class="number">1.</span>stu.score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>总结：</strong>在结构体中可以定义另一个结构体作为成员，用来解决实际问题</p><br><h4 id="8-6-结构体做函数参数"><a href="#8-6-结构体做函数参数" class="headerlink" title="8.6 结构体做函数参数"></a>8.6 结构体做函数参数</h4><p><strong>作用：</strong>将结构体作为参数向函数中传递</p><p>传递方式有两种：</p><ul><li>值传递</li><li>地址传递</li></ul><p><strong>示例：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学生结构体定义</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//成员列表</span></span><br><span class="line">    string name;  <span class="comment">//姓名</span></span><br><span class="line">    <span class="type">int</span> age;      <span class="comment">//年龄</span></span><br><span class="line">    <span class="type">int</span> score;    <span class="comment">//分数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//值传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printStudent</span><span class="params">(student stu )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    stu.age = <span class="number">28</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;子函数中 姓名：&quot;</span> &lt;&lt; stu.name &lt;&lt; <span class="string">&quot; 年龄： &quot;</span> &lt;&lt; stu.age  &lt;&lt; <span class="string">&quot; 分数：&quot;</span> &lt;&lt; stu.score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//地址传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printStudent2</span><span class="params">(student *stu)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    stu-&gt;age = <span class="number">28</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;子函数中 姓名：&quot;</span> &lt;&lt; stu-&gt;name &lt;&lt; <span class="string">&quot; 年龄： &quot;</span> &lt;&lt; stu-&gt;age  &lt;&lt; <span class="string">&quot; 分数：&quot;</span> &lt;&lt; stu-&gt;score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    student stu = &#123; <span class="string">&quot;张三&quot;</span>,<span class="number">18</span>,<span class="number">100</span>&#125;;</span><br><span class="line">    <span class="comment">//值传递</span></span><br><span class="line">    <span class="built_in">printStudent</span>(stu);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;主函数中 姓名：&quot;</span> &lt;&lt; stu.name &lt;&lt; <span class="string">&quot; 年龄： &quot;</span> &lt;&lt; stu.age &lt;&lt; <span class="string">&quot; 分数：&quot;</span> &lt;&lt; stu.score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//地址传递</span></span><br><span class="line">    <span class="built_in">printStudent2</span>(&amp;stu);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;主函数中 姓名：&quot;</span> &lt;&lt; stu.name &lt;&lt; <span class="string">&quot; 年龄： &quot;</span> &lt;&lt; stu.age  &lt;&lt; <span class="string">&quot; 分数：&quot;</span> &lt;&lt; stu.score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>总结：如果不想修改主函数中的数据，用值传递，反之用地址传递</p></blockquote><h4 id="8-7-结构体中-const使用场景"><a href="#8-7-结构体中-const使用场景" class="headerlink" title="8.7 结构体中 const使用场景"></a>8.7 结构体中 const使用场景</h4><p><strong>作用：</strong>用<code>const</code>来防止误操作</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学生结构体定义</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//成员列表</span></span><br><span class="line">    string name;  <span class="comment">//姓名</span></span><br><span class="line">    <span class="type">int</span> age;      <span class="comment">//年龄</span></span><br><span class="line">    <span class="type">int</span> score;    <span class="comment">//分数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//const使用场景</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printStudent</span><span class="params">(<span class="type">const</span> student *stu)</span> <span class="comment">//加const防止函数体中的误操作</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//stu-&gt;age = 100; //操作失败，因为加了const修饰</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; stu-&gt;name &lt;&lt; <span class="string">&quot; 年龄：&quot;</span> &lt;&lt; stu-&gt;age &lt;&lt; <span class="string">&quot; 分数：&quot;</span> &lt;&lt; stu-&gt;score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    student stu = &#123; <span class="string">&quot;张三&quot;</span>,<span class="number">18</span>,<span class="number">100</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printStudent</span>(&amp;stu);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="8-8-联合体-Union"><a href="#8-8-联合体-Union" class="headerlink" title="8.8 联合体 Union"></a>8.8 联合体 Union</h4><p>通过<code>union</code>创建联合体，其成员变量共享内存，因此<code>union</code>的数据类型大小由其最大的成员变量决定。</p><p>如下面的 <code>USER</code>，其占用4字节。访问 <code>sHP</code> 时，就访问前两个字节；访问 <code>nHP</code> 时，就访问前4个字节。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">union</span> <span class="title class_">USER</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">short</span> sHP;</span><br><span class="line">    <span class="type">int</span> nHP;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匿名联合体：只可以用一次，临时用一次</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">short</span> sHP;</span><br><span class="line">    <span class="type">int</span> nHP;</span><br><span class="line">&#125; role;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在结构体中嵌套联合体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MyStruct</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 临时用一次</span></span><br><span class="line">    <span class="keyword">union</span> &#123;</span><br><span class="line">        <span class="type">short</span> sHP;</span><br><span class="line">        <span class="type">int</span> nHP;</span><br><span class="line">    &#125; user;</span><br><span class="line">    <span class="type">int</span> xp;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    USER user&#123;<span class="number">0</span>&#125;;<span class="comment">// [0][0][][] // 可能仅仅初始化了short部分</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;大小：&quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(user) &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    user.sHP = <span class="number">100</span>;<span class="comment">// [100][0][?][?]</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;sHP：&quot;</span> &lt;&lt; user.sHP &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;nHP：&quot;</span> &lt;&lt; user.nHP &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;地址：&quot;</span> &lt;&lt; &amp;user.sHP &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; &amp;user.nHP &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="8-9-结构体与联合体的内存对齐问题"><a href="#8-9-结构体与联合体的内存对齐问题" class="headerlink" title="8.9 结构体与联合体的内存对齐问题"></a>8.9 结构体与联合体的内存对齐问题</h4><h5 id="8-9-1-内存对齐的三条规则及注意事项"><a href="#8-9-1-内存对齐的三条规则及注意事项" class="headerlink" title="8.9.1 内存对齐的三条规则及注意事项"></a>8.9.1 内存对齐的三条规则及注意事项</h5><ol><li>数据成员对齐规则：即结构体 <code>struct</code>或联合体 <code>union</code> 的数据成员的起始地址规定<ul><li>第一个数据成员存放在<code>offset</code>为0的地方</li><li>🔺之后的每个数据成员存储的起始位置，要从该成员大小或者成员的子成员(只要该成员有子成员，比如数组、结构体等)大小的整数倍开始【如：int在64位平台下占用 <code>4Byte</code>，则要从4的整数倍地址开始存储；相应地，double要从8的整数倍开始存储】</li></ul></li><li>结构体作为成员的对齐规则：如果一个结构体里有某些结构体成员，则结构体成员要从其内部最大元素大小的整数倍地址开始存储。</li><li>结构体的总大小规则：即<code>sizeof</code> 的结果，必须是其内部最大成员长度【即在前面内存对齐指令中，提到的有效值】的整数倍，不足的要补齐。</li></ol><p>值得注意的是：</p><ul><li>数组在内存中存储时是分开存储的，char类型的数组每个元素是 1Byte，内存对齐时按照单个元素进行对齐</li><li>联合体类型中的数据共用内存<ul><li>联合的所有成员共用一段内存空间，存储地址的起始位置都相同。</li><li>一般来说，最大成员的内存宽度作为union的内存大小。主要的原因是为了节省内存空间。</li><li>默认的访问权限是公有的，但是它同样要遵守内存对齐的原则，特别是第3条规则。</li></ul></li><li>C++中，空结构体占用 1Byte，空类同样是占用 1Byte的内存空间，类和结构体一样，需要内存对齐。</li></ul><br><h5 id="8-9-2-举例说明"><a href="#8-9-2-举例说明" class="headerlink" title="8.9.2 举例说明"></a>8.9.2 举例说明</h5><p>📋示例一：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">double</span> b;</span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">&#125;;<span class="comment">//24</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>类型</th><th>int</th><th>double</th><th>char</th></tr></thead><tbody><tr><td>地址</td><td>0~3</td><td>8~15</td><td>16</td></tr><tr><td>累计所占内存（字节）</td><td>4</td><td>16</td><td>17</td></tr><tr><td>按照规则（最大成员长度整数倍）</td><td>4</td><td>16</td><td>24</td></tr></tbody></table><ul><li>int：占用 4Byte【存储位置0-3】【规则1】</li><li>double：占用 8Byte【存储位置是从该类型长度<code>8Byte</code>的整数倍开始存储，即8-15】【规则1】</li><li>char：占用 1Byte，存储位置16【规则1】</li><li>总共用了17 Byte，但是 sizeof 所得的大小为24【规则3：<code>sizeof</code>的大小必须是内部最大成员长度的整数倍，不足的要补齐】</li></ul><p>📋示例二：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Test2</span> &#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">double</span> b;</span><br><span class="line">    <span class="type">char</span> c[<span class="number">6</span>];</span><br><span class="line">&#125;;<span class="comment">//24</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Test22</span> &#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">double</span> b;</span><br><span class="line">    <span class="type">char</span> c[<span class="number">5</span>];</span><br><span class="line">&#125;;<span class="comment">//24</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>类型</th><th>int</th><th>double</th><th>char [6]</th></tr></thead><tbody><tr><td>地址</td><td>0~3</td><td>8~15</td><td>16~21</td></tr><tr><td>累计所占内存（字节）</td><td>4</td><td>16</td><td>21</td></tr><tr><td>按照规则（最大成员长度整数倍）</td><td>4</td><td>16</td><td>24</td></tr></tbody></table><ul><li><code>int</code>、<code>double</code> 同上。</li><li>数组在内存中存储时是分开存储的，char类型的数组每个元素是 1Byte，按单个元素进行内存对齐，故sizeof大小还是24【规则1 &amp; 规则3】。</li><li>故<code>Test22</code>的sizeof大小也是24。</li></ul><p>📋示例三：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">double</span> b;</span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">&#125;;<span class="number">24</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Test3</span> &#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    Test d;</span><br><span class="line">    <span class="type">double</span> b;</span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">&#125;;<span class="comment">//48</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>类型</th><th>int</th><th>int</th><th>double</th><th>char</th><th>double</th><th>char</th></tr></thead><tbody><tr><td>地址</td><td>0~3</td><td>8~11</td><td>16~23</td><td>24</td><td>32~39</td><td>40</td></tr><tr><td>累计所占内存（字节）</td><td>4</td><td>12</td><td>24</td><td>25</td><td>40</td><td>41</td></tr><tr><td>按照规则（最大成员长度整数倍）</td><td></td><td></td><td></td><td></td><td></td><td>48</td></tr></tbody></table><ul><li>int：占用 4Byte【存储位置0-3】【规则1】</li><li>Test中最大的元素是double，占用 8Byte，Test中的成员按照 8Byte 的整数倍的地址开始存储【规则2】<ul><li>Test中的 <code>int</code>：占用 4Byte【存储位置8-11】</li><li>Test中的 <code>double</code>：占用 8Byte【存储位置16-23】</li><li>Test中的 <code>char</code>：占用 1Byte【存储位置24】</li></ul></li><li>double：占用 8Byte【存储位置32-39】【规则1】</li><li>char：占用1 Byte【存储位置40】</li><li>总大小：40是最大元素大小8的整数倍，但是要大于40，按照规则3补齐，sizeof为48【规则1 &amp; 规则2 &amp; 规则3】</li></ul><p>📋示例四：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">double</span> b;</span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Test3</span> &#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    Test d;</span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">&#125;;<span class="comment">//40</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>类型</th><th>int</th><th>int</th><th>double</th><th>char</th><th>char</th></tr></thead><tbody><tr><td>地址</td><td>0~3</td><td>8~11</td><td>16~23</td><td>24</td><td>32</td></tr><tr><td>累计所占内存（字节）</td><td>4</td><td>12</td><td>24</td><td>25</td><td>33</td></tr><tr><td>按照规则（最大成员长度整数倍）</td><td></td><td></td><td>24</td><td>32</td><td>40</td></tr></tbody></table><ul><li>Test3中的最大数据成员大小比成员结构体Test内部最大成员大小要小，即此时最大成员为<code>double</code>。</li><li>此时规则3是按照成员结构体内部的最大成员的整数倍进行补齐的，sizeof的结果是40。</li><li>注意Test3中char的存储位置。</li></ul><p>📋示例五：关于联合体</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> <span class="title class_">uTest1</span>&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">20</span>];</span><br><span class="line">    <span class="type">int</span> b;</span><br><span class="line">    <span class="type">float</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">union</span> <span class="title class_">uTest2</span>&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">20</span>];</span><br><span class="line">    <span class="type">int</span> b;</span><br><span class="line">    <span class="type">float</span> c;</span><br><span class="line">    <span class="type">double</span> d;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>找到联合体中最大的数据类型，还必须满足是所有成员的整数倍</li><li>uTest1中，sizeof的大小是20，即a[20]的大小，同样20是b和c的倍数</li><li>uTest2中，sizeof的大小是24，即满足容下a[20]，同样24是b、c和d的倍数【规则3】</li></ul><p>📋示例六：练习</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">s1</span>&#123;</span><br><span class="line">    <span class="type">char</span> ch1;</span><br><span class="line">    <span class="type">char</span> ch2;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">&#125;;<span class="comment">//8</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">s2</span>&#123;</span><br><span class="line">    <span class="type">char</span> ch1;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">char</span> ch2;</span><br><span class="line">&#125;;<span class="comment">//12</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">s3</span>&#123;</span><br><span class="line">    <span class="type">char</span> ch;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">char</span> str[<span class="number">10</span>];</span><br><span class="line">&#125;;<span class="comment">//20</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">s4</span>&#123;</span><br><span class="line">    <span class="type">char</span> ch;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">s</span>&#123;</span><br><span class="line">        <span class="type">char</span> ch1;</span><br><span class="line">        <span class="type">int</span> j;</span><br><span class="line">    &#125;sub;</span><br><span class="line">    <span class="type">float</span> f;</span><br><span class="line">&#125;;<span class="comment">//20</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">s5</span>&#123;</span><br><span class="line">    <span class="type">char</span> ch;</span><br><span class="line">    <span class="type">char</span> i;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">s</span>&#123;</span><br><span class="line">        <span class="type">char</span> ch1;</span><br><span class="line">        <span class="type">double</span> j;</span><br><span class="line">    &#125;sub;</span><br><span class="line">    <span class="type">char</span> f;</span><br><span class="line">&#125;;<span class="comment">//32</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">struct</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">union</span> <span class="title class_">B</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span>* pc;</span><br><span class="line">        <span class="type">int</span> z; </span><br><span class="line">    &#125;;</span><br><span class="line">&#125;; <span class="comment">//1, struct A is empty struct</span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">struct</span> <span class="title class_">AA</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">union</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span>* pc;</span><br><span class="line">        <span class="type">int</span> z; </span><br><span class="line">    &#125;; </span><br><span class="line"> </span><br><span class="line">&#125;;<span class="comment">//32-bit: 4, 64-bit: 8</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">AAA</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">union</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span>* pc;</span><br><span class="line">        <span class="type">int</span> z; </span><br><span class="line">    &#125; B;</span><br><span class="line">&#125;;<span class="comment">//32-bit: 4, 64-bit: 8</span></span><br></pre></td></tr></table></figure><br><h5 id="8-9-3-关于数组的内存对齐问题"><a href="#8-9-3-关于数组的内存对齐问题" class="headerlink" title="8.9.3 关于数组的内存对齐问题"></a>8.9.3 关于数组的内存对齐问题</h5><p>实际上从内存的角度，<strong>数组是若干个连续的相同大小元素的集合。</strong>也就是说，char[20] 和 连续的20 个char 元素在内存中没有什么分别。所以当结构体中有数组时，可以把它拆解开成连续排列的多个子元素。</p><p>如下代码示例：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">struct</span> <span class="title class_">str1</span>&#123;</span><br><span class="line">  <span class="type">double</span> a;</span><br><span class="line">  <span class="type">char</span> no[<span class="number">9</span>];</span><br><span class="line">  <span class="type">int</span> bb;</span><br><span class="line">  <span class="type">double</span> aa;</span><br><span class="line">&#125; s1;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">str2</span>&#123;</span><br><span class="line">  <span class="type">double</span> a;</span><br><span class="line">  <span class="type">char</span> no1;</span><br><span class="line">  <span class="type">char</span> no2;</span><br><span class="line">  <span class="type">char</span> no3;</span><br><span class="line">  <span class="type">char</span> no4;</span><br><span class="line">  <span class="type">char</span> no5;</span><br><span class="line">  <span class="type">char</span> no6;</span><br><span class="line">  <span class="type">char</span> no7;</span><br><span class="line">  <span class="type">char</span> no8;</span><br><span class="line">  <span class="type">char</span> no9;</span><br><span class="line">  <span class="type">int</span> bb;</span><br><span class="line">  <span class="type">double</span> aa;</span><br><span class="line">&#125; s2;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// sizeof(s1) = sizeof(s2) = 32</span></span><br></pre></td></tr></table></figure><br><h5 id="8-9-4-字节对齐的原因"><a href="#8-9-4-字节对齐的原因" class="headerlink" title="8.9.4 字节对齐的原因"></a>8.9.4 字节对齐的原因</h5><ul><li>平台原因【移植原因】：不是所有的硬件平台都能任意访问地址上的任意数据的，某些硬件平台只能在某些地址处取某些特定类型的数据，否则抛出硬件异常。</li><li>性能原因，经过内存对齐后，CPU的访问效率会得到很大的提高<ul><li>CPU把内存当成是一块一块的，块的大小可以是2、4、8、16Byte 大小。</li><li>因此，CPU在读取内存时是一块一块进行读取的，当读取块的大小是 4Byte 时，一个数据所占的字节偏移offset为3、4、5、6，那么CPU访问数据时便需要访问两次，才能得到完整的数据，经过内存对齐后，便可以通过一次访问CPU获取完整的数据。</li></ul></li></ul><br><h3 id="9、通讯录管理系统案例"><a href="#9、通讯录管理系统案例" class="headerlink" title="9、通讯录管理系统案例"></a>9、通讯录管理系统案例</h3><h4 id="9-1-系统需求"><a href="#9-1-系统需求" class="headerlink" title="9.1 系统需求"></a>9.1 系统需求</h4><p>通讯录是一个可以记录亲人、好友信息的工具。</p><p>本教程主要利用C++来实现一个通讯录管理系统</p><p>系统中需要实现的功能如下：</p><ul><li>添加联系人：向通讯录中添加新人，信息包括（姓名、性别、年龄、联系电话、家庭住址）最多记录1000人</li><li>显示联系人：显示通讯录中所有联系人信息</li><li>删除联系人：按照姓名进行删除指定联系人</li><li>查找联系人：按照姓名查看指定联系人信息</li><li>修改联系人：按照姓名重新修改指定联系人</li><li>清空联系人：清空通讯录中所有信息</li><li>退出通讯录：退出当前使用的通讯录</li></ul><h4 id="9-2-菜单功能"><a href="#9-2-菜单功能" class="headerlink" title="9.2 菜单功能"></a>9.2 菜单功能</h4><p><strong>功能描述：</strong> 用户选择功能的界面</p><p>菜单界面效果如下图：</p><p><img src="./cpp1-1.png"></p><p><strong>步骤：</strong></p><ul><li>封装函数显示该界面 如 <code>void showMenu()</code></li><li>在main函数中调用封装好的函数</li></ul><p><strong>代码：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//菜单界面</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showMenu</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;***************************&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  1、添加联系人  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  2、显示联系人  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  3、删除联系人  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  4、查找联系人  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  5、修改联系人  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  6、清空联系人  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  0、退出通讯录  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;***************************&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">showMenu</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="9-3-退出功能"><a href="#9-3-退出功能" class="headerlink" title="9.3 退出功能"></a>9.3 退出功能</h4><p><strong>功能描述</strong>：退出通讯录系统</p><p><strong>思路</strong>：根据用户不同的选择，进入不同的功能，可以选择switch分支结构，将整个架构进行搭建</p><p>当用户选择0时候，执行退出，选择其他先不做操作，也不会退出程序</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> select = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">showMenu</span>();</span><br><span class="line"></span><br><span class="line">        cin &gt;&gt; select;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">switch</span> (select)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:  <span class="comment">//添加联系人</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:  <span class="comment">//显示联系人</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:  <span class="comment">//删除联系人</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:  <span class="comment">//查找联系人</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:  <span class="comment">//修改联系人</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:  <span class="comment">//清空联系人</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:  <span class="comment">//退出通讯录</span></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;欢迎下次使用&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="9-4-添加联系人"><a href="#9-4-添加联系人" class="headerlink" title="9.4 添加联系人"></a>9.4 添加联系人</h4><p><strong>功能描述：</strong></p><p>实现添加联系人功能，联系人上限为1000人，联系人信息包括（姓名、性别、年龄、联系电话、家庭住址）</p><p>添加联系人<strong>实现步骤</strong>：</p><ul><li>设计联系人结构体</li><li>设计通讯录结构体</li><li>main函数中创建通讯录</li><li>封装添加联系人函数</li><li>测试添加联系人功能</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span>  <span class="comment">//string头文件</span></span></span><br><span class="line"><span class="comment">//联系人结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    string m_Name; <span class="comment">//姓名</span></span><br><span class="line">    <span class="type">int</span> m_Sex; <span class="comment">//性别：1男 2女</span></span><br><span class="line">    <span class="type">int</span> m_Age; <span class="comment">//年龄</span></span><br><span class="line">    string m_Phone; <span class="comment">//电话</span></span><br><span class="line">    string m_Addr; <span class="comment">//住址</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MAX 1000 <span class="comment">//最大人数</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通讯录结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Addressbooks</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Person</span> personArray[MAX]; <span class="comment">//通讯录中保存的联系人数组</span></span><br><span class="line">    <span class="type">int</span> m_Size; <span class="comment">//通讯录中人员个数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main 函数初始化</span></span><br><span class="line">    <span class="comment">//创建通讯录</span></span><br><span class="line">    Addressbooks abs;</span><br><span class="line">    <span class="comment">//初始化通讯录中人数</span></span><br><span class="line">    abs.m_Size = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p><strong>添加联系人思路</strong>：添加联系人前先判断通讯录是否已满，如果满了就不再添加，未满情况将新联系人信息逐个加入到通讯录</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、添加联系人信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addPerson</span><span class="params">(Addressbooks *abs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//判断电话本是否满了</span></span><br><span class="line">    <span class="keyword">if</span> (abs-&gt;m_Size == MAX)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;通讯录已满，无法添加&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//姓名</span></span><br><span class="line">        string name;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入姓名：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; name;</span><br><span class="line">        abs-&gt;personArray[abs-&gt;m_Size].m_Name = name;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入性别：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;1 -- 男&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;2 -- 女&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//性别</span></span><br><span class="line">        <span class="type">int</span> sex = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; sex;</span><br><span class="line">            <span class="keyword">if</span> (sex == <span class="number">1</span> || sex == <span class="number">2</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                abs-&gt;personArray[abs-&gt;m_Size].m_Sex = sex;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;输入有误，请重新输入&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//年龄</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入年龄：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="type">int</span> age = <span class="number">0</span>;</span><br><span class="line">        cin &gt;&gt; age;</span><br><span class="line">        abs-&gt;personArray[abs-&gt;m_Size].m_Age = age;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//联系电话</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入联系电话：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        string phone = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        cin &gt;&gt; phone;</span><br><span class="line">        abs-&gt;personArray[abs-&gt;m_Size].m_Phone = phone;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//家庭住址</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入家庭住址：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        string address;</span><br><span class="line">        cin &gt;&gt; address;</span><br><span class="line">        abs-&gt;personArray[abs-&gt;m_Size].m_Addr = address;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//更新通讯录人数</span></span><br><span class="line">        abs-&gt;m_Size++;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;添加成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">        <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="9-5-显示联系人"><a href="#9-5-显示联系人" class="headerlink" title="9.5 显示联系人"></a>9.5 显示联系人</h4><p>功能描述：显示通讯录中已有的联系人信息</p><p><strong>显示联系人实现步骤</strong>：</p><ul><li>封装显示联系人函数</li><li>测试显示联系人功能</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2、显示所有联系人信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">(Addressbooks * abs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (abs-&gt;m_Size == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;当前记录为空&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; abs-&gt;m_Size; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Name &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;性别：&quot;</span> &lt;&lt; (abs-&gt;personArray[i].m_Sex == <span class="number">1</span> ? <span class="string">&quot;男&quot;</span> : <span class="string">&quot;女&quot;</span>) &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;年龄：&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Age &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;电话：&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Phone &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;住址：&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Addr &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="9-6-删除联系人"><a href="#9-6-删除联系人" class="headerlink" title="9.6 删除联系人"></a>9.6 删除联系人</h4><p>功能描述：按照姓名进行删除指定联系人</p><p><strong>实现步骤</strong>：</p><ul><li>封装检测联系人是否存在</li><li>封装删除联系人函数</li><li>测试删除联系人功能</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断是否存在查询的人员，存在返回在数组中索引位置，不存在返回-1</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">isExist</span><span class="params">(Addressbooks * abs, string name)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; abs-&gt;m_Size; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (abs-&gt;personArray[i].m_Name == name)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3、删除指定联系人信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deletePerson</span><span class="params">(Addressbooks * abs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入您要删除的联系人&quot;</span> &lt;&lt; endl;</span><br><span class="line">    string name;</span><br><span class="line">    cin &gt;&gt; name;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ret = <span class="built_in">isExist</span>(abs, name);</span><br><span class="line">    <span class="keyword">if</span> (ret != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = ret; i &lt; abs-&gt;m_Size; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            abs-&gt;personArray[i] = abs-&gt;personArray[i + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">         abs-&gt;m_Size--;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;删除成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;查无此人&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="9-7-查找联系人"><a href="#9-7-查找联系人" class="headerlink" title="9,7 查找联系人"></a>9,7 查找联系人</h4><p>功能描述：按照姓名查看指定联系人信息</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//4、查找指定联系人信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">findPerson</span><span class="params">(Addressbooks * abs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入您要查找的联系人&quot;</span> &lt;&lt; endl;</span><br><span class="line">    string name;</span><br><span class="line">    cin &gt;&gt; name;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ret = <span class="built_in">isExist</span>(abs, name);</span><br><span class="line">    <span class="keyword">if</span> (ret != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Name &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;性别：&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Sex &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;年龄：&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Age &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;电话：&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Phone &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;住址：&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Addr &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;查无此人&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="9-8-修改联系人"><a href="#9-8-修改联系人" class="headerlink" title="9.8 修改联系人"></a>9.8 修改联系人</h4><p>功能描述：按照姓名重新修改指定联系人</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//5、修改指定联系人信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modifyPerson</span><span class="params">(Addressbooks * abs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入您要修改的联系人&quot;</span> &lt;&lt; endl;</span><br><span class="line">    string name;</span><br><span class="line">    cin &gt;&gt; name;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ret = <span class="built_in">isExist</span>(abs, name);</span><br><span class="line">    <span class="keyword">if</span> (ret != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//姓名</span></span><br><span class="line">        string name;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入姓名：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; name;</span><br><span class="line">        abs-&gt;personArray[ret].m_Name = name;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入性别：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;1 -- 男&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;2 -- 女&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//性别</span></span><br><span class="line">        <span class="type">int</span> sex = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; sex;</span><br><span class="line">            <span class="keyword">if</span> (sex == <span class="number">1</span> || sex == <span class="number">2</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                abs-&gt;personArray[ret].m_Sex = sex;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;输入有误，请重新输入&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//年龄</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入年龄：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="type">int</span> age = <span class="number">0</span>;</span><br><span class="line">        cin &gt;&gt; age;</span><br><span class="line">        abs-&gt;personArray[ret].m_Age = age;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//联系电话</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入联系电话：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        string phone = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        cin &gt;&gt; phone;</span><br><span class="line">        abs-&gt;personArray[ret].m_Phone = phone;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//家庭住址</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入家庭住址：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        string address;</span><br><span class="line">        cin &gt;&gt; address;</span><br><span class="line">        abs-&gt;personArray[ret].m_Addr = address;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;修改成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;查无此人&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="9-9-清空联系人"><a href="#9-9-清空联系人" class="headerlink" title="9.9 清空联系人"></a>9.9 清空联系人</h4><p>功能描述：清空通讯录中所有信息</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//6、清空所有联系人</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cleanPerson</span><span class="params">(Addressbooks * abs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    abs-&gt;m_Size = <span class="number">0</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;通讯录已清空&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="9-10-完整代码"><a href="#9-10-完整代码" class="headerlink" title="9.10 完整代码"></a>9.10 完整代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 封装函数显示该界面  如 `void showMenu()`</span></span><br><span class="line"><span class="comment">// 在main函数中调用封装好的函数</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    string m_Name;</span><br><span class="line">    <span class="type">int</span> m_Sex; <span class="comment">// 1:男 2：女</span></span><br><span class="line">    <span class="type">int</span> m_Age;</span><br><span class="line">    string m_Phone;</span><br><span class="line">    string m_Addr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX 20</span></span><br><span class="line"><span class="comment">// 通讯录结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">AddressBook</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Person</span> personArray[MAX];</span><br><span class="line">    <span class="type">int</span> m_size; <span class="comment">// 通讯录中人员数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 菜单界面</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showMenu</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;***************************&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  1、添加联系人  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  2、显示联系人  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  3、删除联系人  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  4、查找联系人  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  5、修改联系人  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  6、清空联系人  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*****  0、退出通讯录  *****&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;***************************&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1、添加联系人</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addPerson</span><span class="params">(AddressBook* abs)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (abs-&gt;m_size &gt;= MAX)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;通讯录已满，无法添加！&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        string name;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入姓名：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; name;</span><br><span class="line">        abs-&gt;personArray[abs-&gt;m_size].m_Name = name;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> sex = <span class="number">0</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入性别[1--男 | 2--女]：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; sex;</span><br><span class="line">        <span class="keyword">while</span> (sex != <span class="number">1</span> &amp;&amp; sex != <span class="number">2</span>) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;请输入合法字段！&quot;</span> &lt;&lt; endl;</span><br><span class="line">            cin &gt;&gt; sex;</span><br><span class="line">        &#125;</span><br><span class="line">        abs-&gt;personArray[abs-&gt;m_size].m_Sex = sex;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> age = <span class="number">0</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入年龄[1~150]：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            cin &gt;&gt; age;</span><br><span class="line">            <span class="keyword">if</span> (age &lt;= <span class="number">150</span> &amp;&amp; age &gt;=<span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                abs-&gt;personArray[abs-&gt;m_size].m_Age = age;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;请输入合法字段！&quot;</span> &lt;&lt; endl;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        string phone;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入联系电话：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; phone;</span><br><span class="line">        abs-&gt;personArray[abs-&gt;m_size].m_Phone = phone;</span><br><span class="line"></span><br><span class="line">        string addr;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入地址[1~50]：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            cin &gt;&gt; addr;</span><br><span class="line">            <span class="keyword">if</span> (addr.<span class="built_in">length</span>() &lt; <span class="number">50</span> &amp;&amp; addr.<span class="built_in">length</span>() &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                abs-&gt;personArray[abs-&gt;m_size].m_Addr = addr;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;请输入合法字段！&quot;</span> &lt;&lt; endl;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 更新通讯录人数</span></span><br><span class="line">        abs-&gt;m_size++;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;添加成功！&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 清屏</span></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、显示所有联系人信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">(AddressBook* abs)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (abs-&gt;m_size == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;当前记录为空&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; abs-&gt;m_size; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Name &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;性别：&quot;</span> &lt;&lt; (abs-&gt;personArray[i].m_Sex == <span class="number">1</span> ? <span class="string">&quot;男&quot;</span> : <span class="string">&quot;女&quot;</span>) &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;年龄：&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Age &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;电话：&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Phone &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;住址：&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Addr &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否存在查询的人员，存在返回在数组中索引位置，不存在返回-1</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">isExist</span><span class="params">(AddressBook* abs, string name)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; abs-&gt;m_size; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (abs-&gt;personArray[i].m_Name == name)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3、删除指定联系人信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deletePerson</span><span class="params">(AddressBook* abs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入您要删除的联系人&quot;</span> &lt;&lt; endl;</span><br><span class="line">    string name;</span><br><span class="line">    cin &gt;&gt; name;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ret = <span class="built_in">isExist</span>(abs, name);</span><br><span class="line">    <span class="keyword">if</span> (ret != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = ret; i &lt; abs-&gt;m_size; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            abs-&gt;personArray[i] = abs-&gt;personArray[i + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        abs-&gt;m_size--;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;删除成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;查无此人&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4、查找联系人</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">findPerson</span><span class="params">(AddressBook* abs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入您要查找的联系人&quot;</span> &lt;&lt; endl;</span><br><span class="line">    string name;</span><br><span class="line">    cin &gt;&gt; name;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ret = <span class="built_in">isExist</span>(abs, name);</span><br><span class="line">    <span class="keyword">if</span> (ret != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Name &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;性别：&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Sex &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;年龄：&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Age &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;电话：&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Phone &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;住址：&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Addr &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;查无此人&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5、修改联系人</span></span><br><span class="line"><span class="comment">//5、修改指定联系人信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modifyPerson</span><span class="params">(AddressBook* abs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入您要修改的联系人&quot;</span> &lt;&lt; endl;</span><br><span class="line">    string name;</span><br><span class="line">    cin &gt;&gt; name;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ret = <span class="built_in">isExist</span>(abs, name);</span><br><span class="line">    <span class="keyword">if</span> (ret != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//姓名</span></span><br><span class="line">        string name;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入姓名：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; name;</span><br><span class="line">        abs-&gt;personArray[ret].m_Name = name;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入性别：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;1 -- 男&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;2 -- 女&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//性别</span></span><br><span class="line">        <span class="type">int</span> sex = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; sex;</span><br><span class="line">            <span class="keyword">if</span> (sex == <span class="number">1</span> || sex == <span class="number">2</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                abs-&gt;personArray[ret].m_Sex = sex;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;输入有误，请重新输入&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//年龄</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入年龄：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="type">int</span> age = <span class="number">0</span>;</span><br><span class="line">        cin &gt;&gt; age;</span><br><span class="line">        abs-&gt;personArray[ret].m_Age = age;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//联系电话</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入联系电话：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        string phone = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        cin &gt;&gt; phone;</span><br><span class="line">        abs-&gt;personArray[ret].m_Phone = phone;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//家庭住址</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入家庭住址：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        string address;</span><br><span class="line">        cin &gt;&gt; address;</span><br><span class="line">        abs-&gt;personArray[ret].m_Addr = address;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;修改成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;查无此人&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6、清空联系人</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cleanPerson</span><span class="params">(AddressBook* abs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    abs-&gt;m_size = <span class="number">0</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;通讯录已清空&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> select = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 初始化通讯录</span></span><br><span class="line">    AddressBook abs;</span><br><span class="line">    abs.m_size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="built_in">showMenu</span>();</span><br><span class="line">        cin &gt;&gt; select;</span><br><span class="line">        <span class="keyword">switch</span> (select)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">// 添加联系人</span></span><br><span class="line">            <span class="built_in">addPerson</span>(&amp;abs); <span class="comment">// 注意使用地址传递</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">// 显示联系人</span></span><br><span class="line">            <span class="built_in">showPerson</span>(&amp;abs);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">// 删除联系人</span></span><br><span class="line">            <span class="built_in">deletePerson</span>(&amp;abs);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>: <span class="comment">// 查找联系人</span></span><br><span class="line">            <span class="built_in">findPerson</span>(&amp;abs);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>: <span class="comment">// 修改联系人</span></span><br><span class="line">            <span class="built_in">modifyPerson</span>(&amp;abs);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>: <span class="comment">// 清空联系人</span></span><br><span class="line">            <span class="built_in">cleanPerson</span>(&amp;abs);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">// 退出</span></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;欢迎下次使用！&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css"></div><div class="reward-container"><div></div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/wechatpay.png" alt="Moustache 微信支付"><p>微信支付</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>Moustache</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://hammerzer.github.io/2024/03/11/cpp-base-1/" title="CPP-BASE-1">https://hammerzer.github.io/2024/03/11/cpp-base-1/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/CPP%E5%9F%BA%E7%A1%80/" rel="tag"><i class="fa fa-tag"></i> CPP基础</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2024/01/09/python-crawler/" rel="prev" title="Python爬虫"><i class="fa fa-chevron-left"></i> Python爬虫</a></div><div class="post-nav-item"><a href="/2024/03/12/cpp-base-2/" rel="next" title="CPP-BASE-2">CPP-BASE-2 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#CONTENT-OUTLINE"><span class="nav-number">1.</span> <span class="nav-text">CONTENT OUTLINE</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81C-%E5%9F%BA%E7%A1%80"><span class="nav-number">2.</span> <span class="nav-text">一、C++ 基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E3%80%81C-%E5%88%9D%E8%AF%86"><span class="nav-number">2.1.</span> <span class="nav-text">1、C++初识</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-C-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="nav-number">2.1.1.</span> <span class="nav-text">1.1 C++ 环境配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-%E5%8F%98%E9%87%8F"><span class="nav-number">2.1.2.</span> <span class="nav-text">1.2 变量</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-2-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">1.2.1 自定义变量名称</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-%E5%B8%B8%E9%87%8F"><span class="nav-number">2.1.3.</span> <span class="nav-text">1.3 常量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">2.1.4.</span> <span class="nav-text">1.4 关键字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-%E6%A0%87%E8%AF%86%E7%AC%A6%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99"><span class="nav-number">2.1.5.</span> <span class="nav-text">1.5 标识符命名规则</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%E3%80%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.2.</span> <span class="nav-text">2、数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-%E6%95%B4%E5%9E%8B"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.1 整型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-sizeof%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.2 sizeof关键字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-%E5%AE%9E%E5%9E%8B%EF%BC%88%E6%B5%AE%E7%82%B9%E5%9E%8B%EF%BC%89"><span class="nav-number">2.2.3.</span> <span class="nav-text">2.3 实型（浮点型）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-%E5%AD%97%E7%AC%A6%E5%9E%8B"><span class="nav-number">2.2.4.</span> <span class="nav-text">2.4 字符型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-4-1-%E5%AD%97%E7%AC%A6%E5%9E%8B%E5%8F%98%E9%87%8F"><span class="nav-number">2.2.4.1.</span> <span class="nav-text">2.4.1 字符型变量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-4-2-%E5%AD%97%E7%AC%A6%E5%A4%84%E7%90%86"><span class="nav-number">2.2.4.2.</span> <span class="nav-text">2.4.2 字符处理</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6"><span class="nav-number">2.2.5.</span> <span class="nav-text">2.5 转义字符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-6-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%9E%8B"><span class="nav-number">2.2.6.</span> <span class="nav-text">2.6 字符串型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-6-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%9E%8B%E5%8F%98%E9%87%8F"><span class="nav-number">2.2.6.1.</span> <span class="nav-text">2.6.1 字符串型变量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-6-2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86"><span class="nav-number">2.2.6.2.</span> <span class="nav-text">2.6.2 字符串处理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-6-3-C-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">2.2.6.3.</span> <span class="nav-text">2.6.3 C++字符串</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-6-4-%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">2.2.6.4.</span> <span class="nav-text">2.6.4 指针数组字符串</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-6-5-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%95%B0%E5%AD%97"><span class="nav-number">2.2.6.5.</span> <span class="nav-text">2.6.5 字符串转数字</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-6-6-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B5%81-stringstream"><span class="nav-number">2.2.6.6.</span> <span class="nav-text">2.6.6 字符串流 stringstream</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-6-7-%E7%BB%83%E4%B9%A01"><span class="nav-number">2.2.6.7.</span> <span class="nav-text">2.6.7 练习1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-6-8-%E7%BB%83%E4%B9%A02"><span class="nav-number">2.2.6.8.</span> <span class="nav-text">2.6.8 练习2</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-6-9-%E7%BB%83%E4%B9%A03"><span class="nav-number">2.2.6.9.</span> <span class="nav-text">2.6.9 练习3</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-7-%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B-bool"><span class="nav-number">2.2.7.</span> <span class="nav-text">2.7 布尔类型 bool</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-8-%E6%8E%A8%E6%96%AD%E7%B1%BB%E5%9E%8Bauto"><span class="nav-number">2.2.8.</span> <span class="nav-text">2.8 推断类型auto</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-9-%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.2.9.</span> <span class="nav-text">2.9 枚举类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-10-%E6%95%B0%E6%8D%AE%E7%9A%84%E8%BE%93%E5%85%A5"><span class="nav-number">2.2.10.</span> <span class="nav-text">2.10 数据的输入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-11-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="nav-number">2.2.11.</span> <span class="nav-text">2.11 类型转换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-12-%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA%E6%B5%81"><span class="nav-number">2.2.12.</span> <span class="nav-text">2.12 格式化输出流</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3%E3%80%81%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.3.</span> <span class="nav-text">3、运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.3.1.</span> <span class="nav-text">3.1 算术运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.3.2.</span> <span class="nav-text">3.2 赋值运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.3.3.</span> <span class="nav-text">3.3 比较运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.3.4.</span> <span class="nav-text">3.4 逻辑运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-5-%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="nav-number">2.3.5.</span> <span class="nav-text">3.5 位运算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-5-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-number">2.3.6.</span> <span class="nav-text">3.5 运算符优先级</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4%E3%80%81-%E7%A8%8B%E5%BA%8F%E6%B5%81%E7%A8%8B%E7%BB%93%E6%9E%84"><span class="nav-number">2.4.</span> <span class="nav-text">4、 程序流程结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-%E9%80%89%E6%8B%A9%E7%BB%93%E6%9E%84"><span class="nav-number">2.4.1.</span> <span class="nav-text">4.1 选择结构</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-1-1-if%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.4.1.1.</span> <span class="nav-text">4.1.1 if语句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-1-2-%E4%B8%89%E7%9B%AE%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.4.1.2.</span> <span class="nav-text">4.1.2 三目运算符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-1-3-switch%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.4.1.3.</span> <span class="nav-text">4.1.3 switch语句</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84"><span class="nav-number">2.4.2.</span> <span class="nav-text">4.2 循环结构</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2-1-while%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.4.2.1.</span> <span class="nav-text">4.2.1 while循环语句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2-2-do%E2%80%A6while%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.4.2.2.</span> <span class="nav-text">4.2.2 do…while循环语句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2-3-for%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.4.2.3.</span> <span class="nav-text">4.2.3 for循环语句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2-4-%E5%B5%8C%E5%A5%97%E5%BE%AA%E7%8E%AF"><span class="nav-number">2.4.2.4.</span> <span class="nav-text">4.2.4 嵌套循环</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-%E8%B7%B3%E8%BD%AC%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.4.3.</span> <span class="nav-text">4.3 跳转语句</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-3-1-break%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.4.3.1.</span> <span class="nav-text">4.3.1 break语句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-3-2-continue%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.4.3.2.</span> <span class="nav-text">4.3.2 continue语句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-3-3-goto%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.4.3.3.</span> <span class="nav-text">4.3.3 goto语句</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-4-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">2.4.4.</span> <span class="nav-text">4.4 生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-4-1-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="nav-number">2.4.4.1.</span> <span class="nav-text">4.4.1 命名空间</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-4-2-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">2.4.4.2.</span> <span class="nav-text">4.4.2 生命周期</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5%E3%80%81%E6%95%B0%E7%BB%84"><span class="nav-number">2.5.</span> <span class="nav-text">5、数组</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-%E6%A6%82%E8%BF%B0"><span class="nav-number">2.5.1.</span> <span class="nav-text">5.1 概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="nav-number">2.5.2.</span> <span class="nav-text">5.2 一维数组</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#5-2-1-%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F"><span class="nav-number">2.5.2.1.</span> <span class="nav-text">5.2.1 一维数组定义方式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-2-2-%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84%E6%95%B0%E7%BB%84%E5%90%8D"><span class="nav-number">2.5.2.2.</span> <span class="nav-text">5.2.2 一维数组数组名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-2-3-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F"><span class="nav-number">2.5.2.3.</span> <span class="nav-text">5.2.3 冒泡排序</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="nav-number">2.5.3.</span> <span class="nav-text">5.3 二维数组</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#5-3-1-%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F"><span class="nav-number">2.5.3.1.</span> <span class="nav-text">5.3.1 二维数组定义方式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-3-2-%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E6%95%B0%E7%BB%84%E5%90%8D"><span class="nav-number">2.5.3.2.</span> <span class="nav-text">5.3.2 二维数组数组名</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-%E6%95%B0%E7%BB%84%E9%81%8D%E5%8E%86"><span class="nav-number">2.5.4.</span> <span class="nav-text">5.3 数组遍历</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-4-std-array"><span class="nav-number">2.5.5.</span> <span class="nav-text">5.4 std::array</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-4-std-vector"><span class="nav-number">2.5.6.</span> <span class="nav-text">5.4 std::vector</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6%E3%80%81%E5%87%BD%E6%95%B0"><span class="nav-number">2.6.</span> <span class="nav-text">6、函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-%E6%A6%82%E8%BF%B0"><span class="nav-number">2.6.1.</span> <span class="nav-text">6.1 概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="nav-number">2.6.2.</span> <span class="nav-text">6.2 函数的定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-3-%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.6.3.</span> <span class="nav-text">6.3 参数类型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#6-3-1-%E6%8C%87%E9%92%88%E5%8F%82%E6%95%B0"><span class="nav-number">2.6.3.1.</span> <span class="nav-text">6.3.1 指针参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-3-2-%E6%95%B0%E7%BB%84%E5%8F%82%E6%95%B0"><span class="nav-number">2.6.3.2.</span> <span class="nav-text">6.3.2 数组参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-3-3-%E4%B8%8D%E5%AE%9A%E9%87%8F%E5%8F%82%E6%95%B0"><span class="nav-number">2.6.3.3.</span> <span class="nav-text">6.3.3 不定量参数</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-4-%E5%80%BC%E4%BC%A0%E9%80%92"><span class="nav-number">2.6.4.</span> <span class="nav-text">6.4 值传递</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-5-%E5%87%BD%E6%95%B0%E7%9A%84%E5%A3%B0%E6%98%8E"><span class="nav-number">2.6.5.</span> <span class="nav-text">6.5 函数的声明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-6-%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%86%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99"><span class="nav-number">2.6.6.</span> <span class="nav-text">6.6 函数的分文件编写</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-7-%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%EF%BC%9A%E6%8C%87%E9%92%88%E5%92%8C%E5%BC%95%E7%94%A8"><span class="nav-number">2.6.7.</span> <span class="nav-text">6.7 函数返回：指针和引用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7%E3%80%81%E6%8C%87%E9%92%88"><span class="nav-number">2.7.</span> <span class="nav-text">7、指针</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-%E6%8C%87%E9%92%88%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">2.7.1.</span> <span class="nav-text">7.1 指针的基本概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="nav-number">2.7.2.</span> <span class="nav-text">7.2 指针变量的定义和使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-3-%E6%8C%87%E9%92%88%E6%89%80%E5%8D%A0%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4"><span class="nav-number">2.7.3.</span> <span class="nav-text">7.3 指针所占内存空间</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-4-%E7%A9%BA%E6%8C%87%E9%92%88%E5%92%8C%E9%87%8E%E6%8C%87%E9%92%88"><span class="nav-number">2.7.4.</span> <span class="nav-text">7.4 空指针和野指针</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#7-4-1-%E7%A9%BA%E6%8C%87%E9%92%88"><span class="nav-number">2.7.4.1.</span> <span class="nav-text">7.4.1 空指针</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-4-2-%E9%87%8E%E6%8C%87%E9%92%88"><span class="nav-number">2.7.4.2.</span> <span class="nav-text">7.4.2 野指针</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-4-3-%E6%8C%87%E9%92%88%E5%AE%89%E5%85%A8"><span class="nav-number">2.7.4.3.</span> <span class="nav-text">7.4.3 指针安全</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-5-const%E4%BF%AE%E9%A5%B0%E6%8C%87%E9%92%88"><span class="nav-number">2.7.5.</span> <span class="nav-text">7.5 const修饰指针</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-6-%E6%8C%87%E9%92%88%E7%9A%84%E6%8C%87%E9%92%88"><span class="nav-number">2.7.6.</span> <span class="nav-text">7.6 指针的指针</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-7-%E6%8C%87%E9%92%88%E5%92%8C%E6%95%B0%E7%BB%84"><span class="nav-number">2.7.7.</span> <span class="nav-text">7.7 指针和数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-8-%E6%8C%87%E9%92%88%E5%92%8C%E5%87%BD%E6%95%B0"><span class="nav-number">2.7.8.</span> <span class="nav-text">7.8 指针和函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-9-%E6%8C%87%E9%92%88%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="nav-number">2.7.9.</span> <span class="nav-text">7.9 指针的类型转换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-10-%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88"><span class="nav-number">2.7.10.</span> <span class="nav-text">7.10 智能指针</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#7-10-1-%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E7%9A%84%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%8E%9F%E7%90%86"><span class="nav-number">2.7.10.1.</span> <span class="nav-text">7.10.1 智能指针的概念及原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-10-2-%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E7%9A%84%E6%8B%B7%E8%B4%9D%E9%97%AE%E9%A2%98"><span class="nav-number">2.7.10.2.</span> <span class="nav-text">7.10.2 智能指针的拷贝问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-10-3-auto-ptr"><span class="nav-number">2.7.10.3.</span> <span class="nav-text">7.10.3 auto_ptr</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-10-4-std-unique-ptr"><span class="nav-number">2.7.10.4.</span> <span class="nav-text">7.10.4 std::unique_ptr</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-10-5-std-shared-ptr"><span class="nav-number">2.7.10.5.</span> <span class="nav-text">7.10.5 std::shared_ptr</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-10-6-shared-ptr%E7%9A%84%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8%E9%97%AE%E9%A2%98"><span class="nav-number">2.7.10.6.</span> <span class="nav-text">7.10.6 shared_ptr的循环引用问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-10-7-std-weak-ptr"><span class="nav-number">2.7.10.7.</span> <span class="nav-text">7.10.7 std::weak_ptr</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-1-8-%E6%80%BB%E7%BB%93"><span class="nav-number">2.7.10.8.</span> <span class="nav-text">7.1.8 总结</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8%E3%80%81%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">2.8.</span> <span class="nav-text">8、结构体</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-%E7%BB%93%E6%9E%84%E4%BD%93%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">2.8.1.</span> <span class="nav-text">8.1 结构体基本概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-2-%E7%BB%93%E6%9E%84%E4%BD%93%E5%AE%9A%E4%B9%89%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="nav-number">2.8.2.</span> <span class="nav-text">8.2 结构体定义和使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-3-%E7%BB%93%E6%9E%84%E4%BD%93%E6%95%B0%E7%BB%84"><span class="nav-number">2.8.3.</span> <span class="nav-text">8.3 结构体数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-4-%E7%BB%93%E6%9E%84%E4%BD%93%E6%8C%87%E9%92%88"><span class="nav-number">2.8.4.</span> <span class="nav-text">8.4 结构体指针</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-5-%E7%BB%93%E6%9E%84%E4%BD%93%E5%B5%8C%E5%A5%97%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">2.8.5.</span> <span class="nav-text">8.5 结构体嵌套结构体</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-6-%E7%BB%93%E6%9E%84%E4%BD%93%E5%81%9A%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="nav-number">2.8.6.</span> <span class="nav-text">8.6 结构体做函数参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-7-%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%AD-const%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">2.8.7.</span> <span class="nav-text">8.7 结构体中 const使用场景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-8-%E8%81%94%E5%90%88%E4%BD%93-Union"><span class="nav-number">2.8.8.</span> <span class="nav-text">8.8 联合体 Union</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-9-%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%8E%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E9%97%AE%E9%A2%98"><span class="nav-number">2.8.9.</span> <span class="nav-text">8.9 结构体与联合体的内存对齐问题</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#8-9-1-%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E7%9A%84%E4%B8%89%E6%9D%A1%E8%A7%84%E5%88%99%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">2.8.9.1.</span> <span class="nav-text">8.9.1 内存对齐的三条规则及注意事项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-9-2-%E4%B8%BE%E4%BE%8B%E8%AF%B4%E6%98%8E"><span class="nav-number">2.8.9.2.</span> <span class="nav-text">8.9.2 举例说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-9-3-%E5%85%B3%E4%BA%8E%E6%95%B0%E7%BB%84%E7%9A%84%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E9%97%AE%E9%A2%98"><span class="nav-number">2.8.9.3.</span> <span class="nav-text">8.9.3 关于数组的内存对齐问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-9-4-%E5%AD%97%E8%8A%82%E5%AF%B9%E9%BD%90%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="nav-number">2.8.9.4.</span> <span class="nav-text">8.9.4 字节对齐的原因</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9%E3%80%81%E9%80%9A%E8%AE%AF%E5%BD%95%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%A1%88%E4%BE%8B"><span class="nav-number">2.9.</span> <span class="nav-text">9、通讯录管理系统案例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#9-1-%E7%B3%BB%E7%BB%9F%E9%9C%80%E6%B1%82"><span class="nav-number">2.9.1.</span> <span class="nav-text">9.1 系统需求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-2-%E8%8F%9C%E5%8D%95%E5%8A%9F%E8%83%BD"><span class="nav-number">2.9.2.</span> <span class="nav-text">9.2 菜单功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-3-%E9%80%80%E5%87%BA%E5%8A%9F%E8%83%BD"><span class="nav-number">2.9.3.</span> <span class="nav-text">9.3 退出功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-4-%E6%B7%BB%E5%8A%A0%E8%81%94%E7%B3%BB%E4%BA%BA"><span class="nav-number">2.9.4.</span> <span class="nav-text">9.4 添加联系人</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-5-%E6%98%BE%E7%A4%BA%E8%81%94%E7%B3%BB%E4%BA%BA"><span class="nav-number">2.9.5.</span> <span class="nav-text">9.5 显示联系人</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-6-%E5%88%A0%E9%99%A4%E8%81%94%E7%B3%BB%E4%BA%BA"><span class="nav-number">2.9.6.</span> <span class="nav-text">9.6 删除联系人</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-7-%E6%9F%A5%E6%89%BE%E8%81%94%E7%B3%BB%E4%BA%BA"><span class="nav-number">2.9.7.</span> <span class="nav-text">9,7 查找联系人</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-8-%E4%BF%AE%E6%94%B9%E8%81%94%E7%B3%BB%E4%BA%BA"><span class="nav-number">2.9.8.</span> <span class="nav-text">9.8 修改联系人</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-9-%E6%B8%85%E7%A9%BA%E8%81%94%E7%B3%BB%E4%BA%BA"><span class="nav-number">2.9.9.</span> <span class="nav-text">9.9 清空联系人</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-10-%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81"><span class="nav-number">2.9.10.</span> <span class="nav-text">9.10 完整代码</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Moustache" src="/images/180-180.png"><p class="site-author-name" itemprop="name">Moustache</p><div class="site-description" itemprop="description">我是小胡子</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">79</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">9</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">36</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/hammerzer" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hammerzer" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:stellar_lzu@163.com" title="E-Mail → mailto:stellar_lzu@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Chase</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">1.9m</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">29:30</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script size="300" alpha="0.4" zindex="-1" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-ribbon@1/canvas-ribbon.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'JRehDoQ6pHXV1zKg09AMNLFt-gzGzoHsz',
      appKey     : 'cRAt4W15KiQdrIuHlQrRrtIl',
      placeholder: "Just go go",
      avatar     : 'wavatar',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});</script></body></html>